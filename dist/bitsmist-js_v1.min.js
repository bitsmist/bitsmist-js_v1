!function(){"use strict";var u=function(){};u.safeGet=function(t,e,n){for(var o=n,r=t,i=!0,s=e.split("."),a=0;a<s.length;a++){if(!("object"==typeof r&&s[a]in r)){i=!1;break}r=r[s[a]]}return i&&(o=r),o},u.safeSet=function(t,e,n){for(var o,r=t,i=e.split("."),s=0;s<i.length-1;s++){if("object"!=typeof r||i[s]in r){if("object"!=typeof r)throw new TypeError("Key already exists. key="+e+", existingKey="+o+", existingValue="+r)}else r[i[s]]={};o=i[s],r=r[i[s]]}if("object"!=typeof r)throw new TypeError("Key already exists. key="+e+", existingKey="+o+", existingValue="+r);return r[i[i.length-1]]=n,t},u.safeHas=function(t,e){for(var n=t,o=!0,r=e.split("."),i=0;i<r.length;i++){if(!("object"==typeof n&&r[i]in n)){o=!1;break}n=n[r[i]]}return o},u.concatPath=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n]&&("/"==e.slice(e.length-1)&&"/"==t[n].slice(0,1)?e+=t[n].slice(1):"/"==e.slice(e.length-1)||"/"==t[n].slice(0,1)?e+=t[n]:e?e+="/"+t[n]:e=t[n]);return e},u.deepMerge=function(e,n){var o=this;return Object.keys(n).forEach(function(t){!e.hasOwnProperty(t)||"object"!=typeof e[t]||e[t]instanceof Array?e[t]=n[t]:o.deepMerge(e[t],n[t])}),e};var n=function(t){this._chain=u.safeGet(t,"chain"),this._items=u.safeGet(t,"items",{})},t={items:{configurable:!0}};t.items.get=function(){var t=this._chain?Object.assign({},this._chain._items,this._items):Object.assign({},this._items);return t},t.items.set=function(t){this._items=t},n.prototype.chain=function(t){this._chain=t},n.prototype.merge=function(t){if(t)for(var e=Array.isArray(t)?t:[t],n=0;n<e.length;n++)u.deepMerge(this._items,e[n])},n.prototype.get=function(t,e){return this._getChainedItem(this._chain,this,t,e)},n.prototype.set=function(t,e){u.safeSet(this._items,t,e)},n.prototype.has=function(t){return u.safeHas(this._items,t)},n.prototype._getLocal=function(t,e){return u.safeGet(this._items,t,e)},n.prototype._getChainedItem=function(t,e,n,o){var r=o;return e&&e.has(n)?r=e._getLocal(n):t&&t.has(n)&&(r=t._getLocal(n)),r},Object.defineProperties(n.prototype,t);function e(){this._components={},this._classes={},this._organizers={},this._settings=new n,this._preferences=new n}var o={components:{configurable:!0},classes:{configurable:!0},organizers:{configurable:!0},settings:{configurable:!0},preferences:{configurable:!0}};o.components.get=function(){return this._components},o.classes.get=function(){return this._classes},o.organizers.get=function(){return this._organizers},o.settings.get=function(){return this._settings},o.settings.set=function(t){this._settings=t},o.preferences.get=function(){return this._preferences},o.preferences.set=function(t){this._preferences=t},e.prototype.addOrganizer=function(t,e){this._organizers[e]=t},Object.defineProperties(e.prototype,o);function p(){}var s=new e;p.newComponent=function(e,t,n){e=e||BITSMIST.v1.Component;function o(t){return Reflect.construct(e,[t],this.constructor)}return p.inherit(o,e),o.prototype._getSettings=function(){return t},n&&customElements.define(n,o),o},p.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Object.setPrototypeOf(t,e)},p.createObject=function(e){for(var n=[],t=arguments.length-1;0<t--;)n[t]=arguments[t+1];try{var o=Function("return ("+e+")")(),r=new(Function.prototype.bind.apply(o,[null].concat(n)))}catch(t){if(!(t instanceof TypeError))throw t;var i=window;e.split(".").forEach(function(t){if(!(i=i[t]))throw new ReferenceError("Class not found. className="+e)}),r=new(Function.prototype.bind.apply(i,[null].concat(n)))}return r};function r(){}r.init=function(e,n){var o=Promise.resolve();return n&&Object.keys(n).forEach(function(t){o=o.then(function(){return r.addComponent(e,t,n[t])})}),o},r.clear=function(e){Object.keys(e._components).forEach(function(t){e._components[t].parentNode.removeChild(e._components[t])}),e._components={}},r.isTarget=function(t){return"append"!=t&&"spec"!=t?!1:!0},r.addComponent=function(i,s,a){return i._components||(i._components={}),new Promise(function(t,e){var n=u.concatPath([i._settings.get("system.appBaseUrl",""),i._settings.get("system.componentPath",""),"path"in a?a.path:""]),o="splitComponent"in a?a.splitComponent:i._settings.get("system.splitComponent",!1),r="className"in a?a.className:s;Promise.resolve().then(function(){return i.loadComponent(r,n,{splitComponent:o})}).then(function(){if(a.rootNode&&!i._components[s]){var t=document.querySelector(a.rootNode);if(!t)throw new ReferenceError("Root node does not exist when adding component "+s+" to "+a.rootNode+". name="+i.name);var e=a.tag?a.tag:a.tagName?"<"+a.tagName+"></"+a.tagName+">":"";if(!e)throw new ReferenceError("Tag name for '"+s+"' is not defined. name="+i.name);t.insertAdjacentHTML("afterbegin",e),i._components[s]=t.children[0]}}).then(function(){t()})})};function i(){}i.addEventHandler=function(t,e,n,o,r){var i="object"==typeof n&&n.order?n.order:0,s=t._bm_detail&&t._bm_detail.listeners?t._bm_detail.listeners:{},a=this.getEventHandler(n,r);if("function"!=typeof a){var c=r?r.name:"";throw TypeError("Event handler is not a function. componentName="+this.name+", pluginName="+c+", eventName="+e)}t._bm_detail||(t._bm_detail={component:this,listeners:s,promises:{},statuses:{}}),s[e]||(s[e]=[],t.addEventListener(e,this.__callEventHandler)),s[e].push({handler:a,options:o,bind:r,order:i}),s[e].sort(function(t,e){return t.order==e.order?0:t.order>e.order?1:-1})},i.trigger=function(e,t,n,o){(n=Object.assign({},n)).eventName=e,n.sender=t,o=o||this;var r=null;try{r=new CustomEvent(e,{detail:n})}catch(t){(r=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!1,n)}return o.dispatchEvent(r),u.safeGet(o,"_bm_detail.promises."+e)||Promise.resolve()},i.triggerSync=function(t,e,n,o){return(n=n||{}).async=!1,i.trigger.call(this,t,e,n,o)},i.setHtmlEventHandlers=function(t,n,e){var o=this;e=e||this;for(var r=this._settings.get("elements."+t),i=r.rootNode?e.querySelectorAll(r.rootNode):e.querySelectorAll("#"+t),s=r.events,a=0;a<i.length;a++)!function(e){Object.keys(s).forEach(function(t){n=Object.assign({},s[t].options,n),o.addEventHandler(i[e],t,s[t],n)})}(a)},i.getEventHandler=function(t,e){e=e||this;var n="object"==typeof t?t.handler:t;return"string"==typeof n&&(n=e?e[n]:this[n]),n=n&&n.bind(e)},i.__callEventHandler=function(t){var e=this,n=u.safeGet(this,"_bm_detail.listeners."+t.type),o=u.safeGet(t,"detail.sender",this);if("handling"==u.safeGet(this,"_bm_detail.statuses."+t.type))throw new Error("Event handler is already running. name="+this.tagName+", eventName="+t.type);u.safeSet(this,"_bm_detail.statuses."+t.type,"handling"),u.safeGet(t,"detail.async",!0)?(this._bm_detail.promises[t.type]=i.__handleAsync(t,o,n),this._bm_detail.promises[t.type].then(function(){u.safeSet(e,"_bm_detail.promises."+t.type,null),u.safeSet(e,"_bm_detail.statuses."+t.type,"")})):(this._bm_detail.promises[t.type]=i.__handleSync(t,o,n),u.safeSet(this,"_bm_detail.promises."+t.type,null),u.safeSet(this,"_bm_detail.statuses."+t.type,""))},i.__handleAsync=function(s,a,c){return new Promise(function(e,t){for(var n=Promise.resolve(),o=[],r=!1,i=0;i<c.length;i++)!function(e){s.extraDetail=c[e].options?c[e].options:{},n=n.then(function(t){return t&&o.push(t),c[e].handler(a,s)}),r=!(!c[e].options||!c[e].options.stopPropagation)||r}(i);r&&s.stopPropagation(),n.then(function(t){t&&o.push(t),e(o)})})},i.__handleSync=function(t,e,n){for(var o=!1,r=0;r<n.length;r++)t.extraDetail=n[r].options?n[r].options:{},n[r].handler(e,t),o=!(!n[r].options||!n[r].options.stopPropagation)||o;return o&&t.stopPropagation(),Promise.resolve()};function a(){}a.organizeSync=function(n,o){var r=this;Object.keys(n).forEach(function(t){var e;t in s.organizers&&((e=a.getOrganizer.call(r,t)).isTarget(o)&&e.init(r,n[t]))})},a.organize=function(o,r){var i=this;return new Promise(function(t,e){var n=Promise.resolve();Object.keys(o).forEach(function(t){var e;t in s.organizers&&((e=a.getOrganizer.call(i,t)).isTarget(r)&&(n=n.then(function(){return e.init(i,o[t])})))}),n.then(function(){t()})})},a.clearOrganizers=function(){var e=this;Object.keys(s.organizers).forEach(function(t){"function"==typeof s.organizers[t].clear&&s.organizers[t].clear(e)})},a.getOrganizer=function(t){var e=s.organizers[t];if("function"!=typeof e||"function"!=typeof e.init)throw TypeError("Organizer is not a function. componentName="+this.name+", type="+t);return e};function c(){}c.ajaxRequest=function(c){return new Promise(function(t,e){var n=u.safeGet(c,"url"),o=u.safeGet(c,"method"),r=u.safeGet(c,"data",""),i=u.safeGet(c,"headers"),s=u.safeGet(c,"options"),a=new XMLHttpRequest;a.open(o,n,!0),s&&Object.keys(s).forEach(function(t){a[t]=s[t]}),i&&Object.keys(i).forEach(function(t){a.setRequestHeader(t,i[t])}),a.addEventListener("load",function(){(200==a.status||201==a.status?t:e)(a)}),a.addEventListener("error",function(){e(a)}),a.send(r)})},c.loadScript=function(i){return new Promise(function(n,t){var e=i,o=document.createElement("script"),r=document.getElementsByTagName("script")[0];o.async=1,o.onload=o.onreadystatechange=function(t,e){!e&&o.readyState&&!/loaded|complete/.test(o.readyState)||(o.onload=o.onreadystatechange=null,o=void 0,e||n())},o.src=e,r.parentNode.insertBefore(o,r)})};function f(){}f.createComponent=function(r,i,s,a){var c=this;return new Promise(function(t,e){var n,o="className"in(i=Object.assign({},i))?i.className:r;c.__autoloadComponent(o,i,s,a).then(function(){n=p.createObject(o,i),t(n)})})},f.loadComponent=function(t,e,n){return this.__autoloadComponent(t,null,e,n)},f.loadSetting=function(r,i){return new Promise(function(e,t){var n,o=u.concatPath([i,r+".js"]);c.ajaxRequest({url:o,method:"GET"}).then(function(t){try{n=JSON.parse(t.responseText)}catch(t){throw new SyntaxError("Illegal json string. url="+o)}e(n)})})},f.loadSpec=function(t,e){var o,r=this,i=u.concatPath([e,t+".js"]);return new Promise(function(e,t){var n=[];n.push(r.__loadSpecFile(i)),Promise.all(n).then(function(t){try{o=JSON.parse(t[0])}catch(t){throw new SyntaxError("Illegal json string. url="+i)}e(o)})})},f.loadTags=function(n,i,s){var a=this;return new Promise(function(t,e){var r=[];n.querySelectorAll("[data-autoload]").forEach(function(t){var e,n,o;t.getAttribute("href")?(e=t.getAttribute("href"),r.push(c.loadScript(e))):(n=t.getAttribute("data-classname")?t.getAttribute("data-classname"):a.__getDefaultClassName(t.tagName),o=t.getAttribute("data-classpath"),o=u.concatPath([i,o]),s.splitComponent=t.getAttribute("data-split")?t.getAttribute("data-split"):s.splitComponent,r.push(a.loadComponent(n,o,s)))}),Promise.all(r).then(function(){t()})})},f.loadTemplate=function(t,e){return this.__autoLoadTemplate(t,e)},f.__isLoadedClass=function(t){var e=!0;if("loaded"==s.classes[t].status)return e;try{var n=window;t.split(".").forEach(function(t){(n=n[t])||(e=!1)})}catch(t){e=!1}return e},f.__autoloadComponent=function(n,t,o,r){var e,i=this;return s.classes[n]||(s.classes[n]={}),e=this.__isLoadedClass(n)?Promise.resolve():"loading"==s.classes[n].status?s.classes[n].promise:(s.classes[n].status="loading",new Promise(function(t,e){i.__loadComponentScript(n,o,r).then(function(){s.classes[n].status="loaded",t()})})),s.classes[n].promise=e},f.__loadComponentScript=function(r,i,s){return s=s||{},new Promise(function(t,e){var n=u.concatPath([i,r+".js"]),o=u.concatPath([i,r+".settings.js"]);Promise.resolve().then(function(){return c.loadScript(n)}).then(function(){if(s.splitComponent)return c.loadScript(o)}).then(function(){t()})})},f.__loadSpecFile=function(o,r){return new Promise(function(e,t){var n;c.ajaxRequest({url:o,method:"GET"}).then(function(t){n=t.responseText,e(n)}).catch(function(t){r&&e(n=r)})})},f.__autoLoadTemplate=function(o,r){var i=this;return new Promise(function(t,e){var n;!o.name||o.html||(n=new Promise(function(e,t){var n=u.concatPath([r,o.name+".html"]);i.__loadTemplateFile(n).then(function(t){o.html=t,e()})})),Promise.all([n]).then(function(){if(!o.isLoaded)return i.trigger("load",i)}).then(function(){o.isLoaded=!0,t()})})},f.__loadTemplateFile=function(n){return new Promise(function(e,t){c.ajaxRequest({url:n,method:"GET"}).then(function(t){e(t.responseText)})})},f.__getDefaultClassName=function(t){var e=t.split("-");return e[0].charAt(0).toUpperCase()+e[0].slice(1).toLowerCase()+e[1].charAt(0).toUpperCase()+e[1].slice(1).toLowerCase()};function l(){}function m(t){var e=Reflect.construct(HTMLElement,[],this.constructor);e._status="",e._uniqueId=(new Date).getTime().toString(16)+Math.floor(100*Math.random()).toString(16);return t=Object.assign({},{autoOpen:!0,autoSetup:!0},t,e._getSettings()),e._settings=new n({items:t}),e._settings.chain(s.settings),e._settings.set("name",u.safeGet(t,"name",e.constructor.name)),e.organizeSync(e._settings.items,"initComponent"),e.trigger("afterInitComponent",e),e}l.waitFor=function(o,r){var e,t,i=this;return r=r||1e4,!o||this.__isAllReady(o)?t=Promise.resolve():(e={waitlist:o},t=new Promise(function(t,n){e.resolve=t,e.reject=n,setTimeout(function(){for(var t="",e=0;e<o.length;e++)t+=o[e].rootNode?o[e].rootNode:"",t+=o[e].name?o[e].name:"",t+=o[e].id?o[e].id:"",t+=o[e].component?o[e].component.name:"",t+=o[e].status?"("+o[e].status+")":"",t+=",";t=t.slice(0,-1),n("waitFor() timed out after "+r+" milliseconds waiting for "+t+", name="+i.name+".")},r)}),e.promise=t,this.__waitingList.push(e)),t},l.clearWaitingList=function(){this.__waitingList.splice(0)},l.registerComponent=function(t,e){s.components[t.uniqueId]?s.components[t.uniqueId].status=e:s.components[t.uniqueId]={component:t,status:e};for(var n=0;n<this.__waitingList.length;n++)this.__isAllReady(this.__waitingList[n].waitlist)&&this.__waitingList[n].resolve();t.status=e},l.__isAllReady=function(o){for(var r=this,t=!0,e=0;e<o.length;e++){if("break"===function(e){var n=!1;if(Object.keys(s.components).forEach(function(t){r.__isReady(o[e],s.components[t])&&(n=!0)}),!n)return t=!1,"break"}(e))break}return t},l.__isReady=function(t,e){var n,o=!0;return t.status=t.status||"opened",t.component&&e.component!==t.component&&(o=!1),t.name&&e.component.name!=t.name&&(o=!1),t.id&&e.component.uniqueId!=t.id&&(o=!1),t.status&&e.status!=t.status&&(o=!1),!t.rootNode||(!(n=document.querySelector(t.rootNode))||t.status&&n.status!=t.status)&&(o=!1),o},l.__waitingList=[],p.inherit(m,HTMLElement),Object.assign(m.prototype,i),Object.assign(m.prototype,a),Object.assign(m.prototype,f),Object.assign(m.prototype,l),customElements.define("bm-component",m),Object.defineProperty(m.prototype,"name",{get:function(){return this._settings.get("name")}}),Object.defineProperty(m.prototype,"uniqueId",{get:function(){return this.id?this.id:this._uniqueId}}),Object.defineProperty(m.prototype,"status",{get:function(){return this._status},set:function(t){this._status=t}}),Object.defineProperty(m.prototype,"settings",{get:function(){return this._settings},configurable:!0}),m.prototype.open=function(o){var r=this;return new Promise(function(t,e){var n=(o=Object.assign({},o)).sender?o.sender:r;r.registerComponent(r,"opening"),Promise.resolve().then(function(){if(r._settings.get("autoSetup")){var t=Object.assign({},s.preferences.items);return o.newPreferences=o.newPreferences?o.newPreferences:t,r.setup(o)}}).then(function(){if(r._settings.get("autoRefresh"))return r.refresh()}).then(function(){return r.trigger("beforeOpen",n,{options:o})}).then(function(){return r.trigger("afterOpen",n,{options:o})}).then(function(){r.registerComponent(r,"opened"),t()})})},m.prototype.close=function(o){var r=this;return new Promise(function(t,e){var n=(o=Object.assign({},o)).sender?o.sender:r;r.registerComponent(r,"closing"),Promise.resolve().then(function(){return r.trigger("beforeClose",n)}).then(function(){return r.trigger("afterClose",n)}).then(function(){r._isModal&&r._modalPromise.resolve(r._modalResult),r.registerComponent(r,"closed"),t()})})},m.prototype.refresh=function(o){var r=this;return new Promise(function(t,e){var n=(o=Object.assign({},o)).sender?o.sender:r;Promise.resolve().then(function(){return r.trigger("beforeRefresh",n,{options:o})}).then(function(){if(r._settings.get("autoFill"))return r.fill(o)}).then(function(){return r.trigger("doRefresh",n,{options:o})}).then(function(){return r.trigger("afterRefresh",n,{options:o})}).then(function(){t()})})},m.prototype.fill=function(t){},m.prototype.setup=function(o){var r=this;return new Promise(function(t,e){var n=(o=Object.assign({},o)).sender?o.sender:r;Promise.resolve().then(function(){return r.trigger("beforeSetup",n,o)}).then(function(){return r.trigger("doSetup",n,o)}).then(function(){return r.trigger("afterSetup",n,o)}).then(function(){t()})})},m.prototype.addComponent=function(t,e){return r.addComponent(this,t,e)},m.prototype.destroy=function(t){var n=this;return new Promise(function(t,e){Promise.resolve().then(function(){return n.trigger("beforeDestroy",n)}).then(function(){return n.trigger("afterDestroy",n)})})},m.prototype.connectedCallback=function(){var o=this;Promise.resolve().then(function(){var t=o.__getPathFromAttribute(),e=t[0],n=t[1];if(n||e)return o.loadSetting(n,e)}).then(function(t){if(t)return o._settings.merge(t),o.organize(t,"connected")}).then(function(){var t=o.__getSettingsFromAttribute();if(t)return o._settings.merge(t),o.organize(t,"connected")}).then(function(){return o.trigger("afterConnect",o)}).then(function(){o.registerComponent(o,"connected")}).then(function(){o._settings.get("autoOpen")&&o.open()})},m.prototype.disconnectedCallback=function(){this.destroy()},m.prototype._getSettings=function(){return{}},m.prototype.__getPathFromAttribute=function(t){var e,n;t=t||"setting";var o=this.getAttribute("data-"+t+"href")?this.getAttribute("data-"+t+"href"):"";return o?(e=o.slice(0,-3),n=""):(n=this.getAttribute("data-"+t+"path")?this.getAttribute("data-"+t+"path"):"",e=this.getAttribute("data-"+t+"name")?this.getAttribute("data-"+t+"name"):"",n&&!e&&(e="settings")),[n,e]},m.prototype.__getSettingsFromAttribute=function(){var e,n=this,t=this._settings.get("rootNode")?document.querySelector(this._settings.get("rootNode")).getAttribute("data-settings"):this.getAttribute("data-settings");t&&(e=JSON.parse(t),Object.keys(e).forEach(function(t){n._settings.set(t,e[t])}))};function d(){}d.init=function(e,n){return n&&Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])}),Promise.resolve()},d.isTarget=function(t){return"append"!=t&&"spec"!=t?!1:!0};function h(){}h.init=function(e,t){return t&&Object.keys(t).forEach(function(t){e.setHtmlEventHandlers(t)}),Promise.resolve()},h.isTarget=function(t){return"append"!=t&&"spec"!=t?!1:!0};function g(){}g.init=function(e,n){return n&&Object.keys(n).forEach(function(t){e.addEventHandler(e,t,n[t])}),Promise.resolve()},g.isTarget=function(t){return"initComponent"!=t&&"connected"!=t?!1:!0};function _(){}_.init=function(t,e){return e&&Object.keys(e).forEach(function(t){_.addOrganizer(e[t],t)}),Promise.resolve()},_.isTarget=function(t){return"initComponent"!=t&&"connected"!=t?!1:!0};function y(){}y.init=function(e,i){return i&&Object.keys(i).forEach(function(r){Object.keys(i[r].events).forEach(function(t){var n=i[r].events[t].handler,o=i[r].events[t].args;e.addEventHandler(e,t,function(){var t={};i[r].className&&(t.name=i[r].className),i[r].rootNode&&(t.rootNode=i[r].rootNode),t.status="opened",e.waitFor([t]).then(function(){var e;i[r].className?Object.keys(s.components).forEach(function(t){s.components[t].component.name==i[r].className&&(e=s.components[t].component)}):e=document.querySelector(i[r].rootNode),e[n].apply(e,o)})})})}),Promise.resolve()},y.isTarget=function(t){return"initComponent"!=t&&"connected"!=t?!1:!0};function v(){}function b(t){var e=Reflect.construct(m,[t],this.constructor);return e._settings.set("templateName",e._settings.get("templateName",e.name)),e._isModal=!1,e._modalOptions,e._modalPromise,e._modalResult,e._shadowRoot,e._templates=e._templates||{},e.trigger("afterInitPad",e),e}v.init=function(e,n){return e._templates=e._templates||{},n&&Object.keys(n).forEach(function(t){e.__getTemplateInfo(t).html=n[t]}),Promise.resolve()},v.isTarget=function(t){return"initComponent"!=t&&"connected"!=t?!1:!0},p.inherit(b,m),customElements.define("bm-pad",b),b.prototype.open=function(n){var o=this;return new Promise(function(t,e){(n=Object.assign({},n)).sender&&n.sender;o.registerComponent(o,"opening"),Promise.resolve().then(function(){return o.switchTemplate(o._settings.get("templateName"))}).then(function(){return m.prototype.open.call(o,n)}).then(function(){t()})})},b.prototype.openModal=function(n){var o=this;return new Promise(function(t,e){n=Object.assign({},n),o._settings.items=Object.assign(o._settings.items,n),o._isModal=!0,o._modalResult={result:!1},o._modalOptions=n,o._modalPromise={resolve:t,reject:e},o.open()})},b.prototype.switchTemplate=function(o){var r=this;return new Promise(function(t,e){var n=r.__getTemplateInfo(o);n.isAppended?t():Promise.resolve().then(function(){var t=u.concatPath([r._settings.get("system.appBaseUrl",""),r._settings.get("system.templatePath",""),r._settings.get("path","")]);return r.loadTemplate(n,t)}).then(function(){return r.__applyTemplate(r._settings.get("rootNode"),o,r._settings.get("templateNode"))}).then(function(){var t=u.concatPath([r._settings.get("system.appBaseUrl",""),r._settings.get("system.componentPath","")]),e=r._settings.get("system.splitComponent",!1);r.loadTags(r,t,{splitComponent:e})}).then(function(){return r.organize(r._settings.items,"append")}).then(function(){if(r._settings.get("waitFor"))return r.waitFor(r._settings.get("waitFor"))}).then(function(){return r.trigger("afterAppend",r)}).then(function(){r._templates[r._settings.get("templateName")]&&(r._templates[r._settings.get("templateName")].isAppended=!1),r._templates[o].isAppended=!0,r._settings.set("templateName",o),t()})})},b.prototype.clone=function(t){if(t=t||this._settings.get("templateName"),!this._templates[t])throw new ReferenceError("Template not loaded. name="+this.name+", templateName="+t);return this._templates[t].node?document.importNode(this._templates[t].node,!0):this._dupElement(t)},b.prototype._dupElement=function(t){t=t||this._settings.get("templateName");var e=document.createElement("div");return e.innerHTML=this._templates[t].html,e.firstElementChild},b.prototype.__getTemplateInfo=function(t){return this._templates[t]||(this._templates[t]={},this._templates[t].name=t,this._templates[t].html="",this._templates[t].isAppended=!1,this._templates[t].isLoaded=!1),this._templates[t]},b.prototype.__appendToNode=function(t,e,n){if(!t)throw new ReferenceError("Root node does not exist. name="+this.name+", rootNode="+n+", templateName="+e);var o;return this._templates[e].node?(o=this.clone(e),t.insertBefore(o,t.firstChild)):t.insertAdjacentHTML("afterbegin",this._templates[e].html),t.children[0]},b.prototype.__applyTemplate=function(t,e,n){var o;e&&(n&&!this._templates[e].node&&(o=this.__appendToNode(document.querySelector(n),e,n),this._templates[e].node="content"in o?o.content:o),n?this.__appendToNode(this,e,"this"):this.innerHTML=this._templates[e].html)},window.BITSMIST=window.BITSMIST||{},window.BITSMIST.v1=window.BITSMIST.v1||{},window.BITSMIST.v1.Globals=s,window.BITSMIST.v1.Component=m,s.addOrganizer(d,"attrs"),s.addOrganizer(r,"components"),s.addOrganizer(h,"elements"),s.addOrganizer(g,"events"),s.addOrganizer(_,"organizers"),s.addOrganizer(y,"services"),s.addOrganizer(v,"templates"),window.BITSMIST.v1.Pad=b,window.BITSMIST.v1.Store=n,window.BITSMIST.v1.AjaxUtil=c,window.BITSMIST.v1.ClassUtil=p,window.BITSMIST.v1.Util=u}();
