{"version":3,"file":"bitsmist-js_v1.esm.js","sources":["../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/v4.js","../src/core/unit/unit.js","../src/core/util/util.js","../src/core/util/class-util.js","../src/core/util/ajax-util.js","../src/core/util/url-util.js","../src/core/store/store.js","../src/core/store/chainable-store.js","../src/core/perk/perk.js","../src/core/perk/basic-perk.js","../src/core/perk/setting-perk.js","../src/core/perk/status-perk.js","../src/core/perk/skin-perk.js","../src/core/perk/style-perk.js","../src/core/perk/event-perk.js","../src/core/perk/unit-perk.js","../src/core/index.js"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/master/LICENSE\n */\n// =============================================================================\n\nimport {v4 as uuidv4} from \"uuid\";\n\n// =============================================================================\n//\tUnit Class\n// =============================================================================\n\nexport default class Unit extends HTMLElement\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__global_assets = {\n\t\t\"callback\": new Map(),\n\t};\n\t#__assets = {};\n\t#__initialized;\n\t#__ready;\n\t#__uniqueid = uuidv4();\n\n\tstatic {\n\t\t// Upgrade Unit\n\t\tUnit.#_upgrade(Unit, \"method\", \"upgrade\", (...args) => {Unit.#_upgrade(Unit, ...args)});\n\t\tUnit.upgrade(\"method\", \"get\", Unit.#_get);\n\t\tUnit.upgrade(\"method\", \"set\", Unit.#_set);\n\t\tUnit.upgrade(\"method\", \"has\", Unit.#_has);\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\tstatic get uniqueId()\n\t{\n\n\t\treturn \"00000000-0000-0000-0000-000000000000\";\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tget uniqueId()\n\t{\n\n\t\treturn this.#__uniqueid;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic get tagName()\n\t{\n\n\t\treturn \"BODY\";\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic get assets()\n\t{\n\n\t\treturn Unit.#__global_assets;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tget assets()\n\t{\n\t\treturn this.#__assets;\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tget ready()\n\t{\n\t\treturn this.#__ready;\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Callbacks\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Connected callback.\n\t */\n\tconnectedCallback()\n\t{\n\n\t\tconsole.debug(`connectedCallback(): Unit is connected. name=${this.tagName}, id=${this.id}, uniqueId=${this.uniqueId}`);\n\n\t\tif (!this.#__initialized)\n\t\t{\n\t\t\t// Upgrade unit\n\t\t\tUnit.#_upgrade(this, \"method\", \"upgrade\", (...args) => {Unit.#_upgrade(this, ...args)});\n\t\t\tthis.upgrade(\"method\", \"get\", Unit.#_get);\n\t\t\tthis.upgrade(\"method\", \"set\", Unit.#_set);\n\t\t\tthis.upgrade(\"method\", \"has\", Unit.#_has);\n\n\t\t\t// Initialize unit\n\t\t\tthis.#__ready = Unit.get(\"callback\", \"initializeCallback\")(this);\n\n\t\t\tthis.#__initialized = true;\n\t\t\tthis.setAttribute(\"bm-powered\", \"\");\n\t\t}\n\n\t\tthis.#__ready = this.#__ready.then(() => {\n\t\t\treturn Unit.get(\"callback\", \"connectedCallback\")(this);\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Disconnected callback.\n\t */\n\tdisconnectedCallback()\n\t{\n\n\t\tconsole.debug(`disconnectedCallback(): Unit is disconnected. name=${this.tagName}, id=${this.id}, uniqueId=${this.uniqueId}`);\n\n\t\tthis.#__ready = this.#__ready.then(() => {\n\t\t\treturn Unit.get(\"callback\", \"disconnectedCallback\")(this);\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Adopted callback.\n\t */\n\tadoptedCallback()\n\t{\n\n\t\tconsole.debug(`adoptedCallback(): Unit is adopted. name=${this.tagName}, id=${this.id}, uniqueId=${this.uniqueId}`);\n\n\t\tthis.#__ready = this.#__ready.then(() => {\n\t\t\treturn Unit.get(\"callback\", \"adoptedCallback\")(this);\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Attribute changed callback.\n\t */\n\tattributeChangedCallback(name, oldValue, newValue)\n\t{\n\n\t\tconsole.debug(`attributeChangedCallback(): Attribute is changed. name=${this.tagName}, id=${this.id}, uniqueId=${this.uniqueId}, name=${name}, oldValue=${oldValue}, newValue=${newValue}`);\n\n\t\tif (this.#__initialized)\n\t\t{\n\t\t\treturn Unit.get(\"callback\", \"attributeChangedCallback\")(this);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get the value from the asset.\n\t *\n\t * @param\t{String}\t\tassetName\t\t\tAsset name.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey.\n\t * @param\t{Object}\t\tdefaultValue\t\tValue returned when key is not found.\n\t *\n\t * @return  {*}\t\t\t\tValue.\n\t */\n\tstatic #_get(assetName, key, defaultValue)\n\t{\n\n\t\treturn this.assets[assetName].get(key, defaultValue);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Set the value to the asset.\n\t *\n\t * @param\t{String}\t\tassetName\t\t\tAsset name.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey.\n\t * @param\t{*}\t\t\t\tvalue\t\t\t\tValue.\n\t */\n\tstatic #_set(assetName, key, value)\n\t{\n\n\t\tthis.assets[assetName].set(key, value);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Return if the unit has the asset.\n\t *\n\t * @param\t{String}\t\tassetName\t\t\tAsset name.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey.\n\t */\n\tstatic #_has(assetName, key)\n\t{\n\n\t\tthis.assets[assetName].has(key);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Upgrade the unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tTarget unit.\n\t * @param\t{String}\t\ttype\t\t\t\tUpgrade type.\n\t * @param\t{String}\t\tname\t\t\t\tSection name.\n\t * @param\t{Function}\t\tcontent\t\t\t\tUpgrade content.\n\t */\n\tstatic #_upgrade(unit, type, name, content)\n\t{\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"asset\":\n\t\t\t\tunit.assets[name] = content;\n\t\t\t\tbreak;\n\t\t\tcase \"method\":\n\t\t\t\tunit[name] = content;\n\t\t\t\tbreak;\n\t\t\tcase \"property\":\n\t\t\t\tObject.defineProperty(unit, name, content);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tunit.assets[type].set(name, content);\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n}\n\ncustomElements.define(\"bm-unit\", Unit);\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/master/LICENSE\n */\n// =============================================================================\n\nimport Unit from \"../unit/unit.js\";\n\n// =============================================================================\n//\tUtil class\n// =============================================================================\n\nexport default class Util\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get an value from object. Return default value when specified key is not available.\n\t *\n\t * @param\t{Object}\t\tstore\t\t\t\tObject that holds keys/values.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to get.\n\t * @param\t{Object}\t\tdefaultValue\t\tValue returned when key is not found.\n\t *\n\t * @return  {*}\t\t\t\tValue.\n\t */\n\tstatic safeGet(store, key, defaultValue)\n\t{\n\n\t\tlet current = store;\n\t\tlet found = true;\n\n\t\tlet keys = key.split(\".\");\n\t\tfor (let i = 0; i < keys.length; i++)\n\t\t{\n\t\t\tif (current !== null && typeof current === \"object\" && keys[i] in current)\n\t\t\t{\n\t\t\t\tcurrent = current[keys[i]];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfound = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn ( found ? current : defaultValue);\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Set the value to object.\n\t *\n\t * @param\t{Object}\t\tstore\t\t\t\tObject that holds keys/values.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to store.\n\t * @param\t{Object}\t\tvalue\t\t\t\tValue to store.\n\t *\n\t * @return\t{Object}\t\tModified object.\n\t */\n\tstatic safeSet(store, key, value)\n\t{\n\n\t\tlet keys = key.split(\".\");\n\t\tlet current = Util.#__createIntermediateObject(store, keys);\n\n\t\tUtil.assert(current !== null && typeof current === \"object\",\n\t\t\t() => `Util.safeSet(): Can't create an intermediate object. Non-object value already exists. key=${key}, existingKey=${( keys.length > 1 ? keys[keys.length-2] : \"\" )}, existingValue=${current}`, TypeError);\n\n\t\tcurrent[keys[keys.length - 1]] = value;\n\n\t\treturn store;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Remove the value from object.\n\t *\n\t * @param\t{Object}\t\tstore\t\t\t\tObject that holds keys/values.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to store.\n\t *\n\t * @return\t{Object}\t\tModified object.\n\t */\n\tstatic safeRemove(store, key)\n\t{\n\n\t\tlet isFound = true;\n\t\tlet current = store;\n\n\t\tlet keys = key.split(\".\");\n\t\tfor (let i = 0; i < keys.length - 1; i++)\n\t\t{\n\t\t\tif (!(keys[i] in current))\n\t\t\t{\n\t\t\t\tisFound = false;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcurrent = current[keys[i]];\n\t\t}\n\n\t\tif (isFound)\n\t\t{\n\t\t\tdelete current[keys[keys.length - 1]];\n\t\t}\n\n\t\treturn store;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Merge the value to store.\n\t *\n\t * @param\t{Object}\t\tstore\t\t\t\tObject that holds keys/values.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to store.\n\t * @param\t{Object}\t\tvalue\t\t\t\tValue to store.\n\t *\n\t * @return\t{Object}\t\tModified object.\n\t */\n\tstatic safeMerge(store, key, value)\n\t{\n\n\t\tlet keys = key.split(\".\");\n\t\tlet current = Util.#__createIntermediateObject(store, keys);\n\n\t\tUtil.assert(current && typeof current === \"object\",\n\t\t\t() => `Util.safeSet(): Can't create an intermediate object. Non-object value already exists. key=${key}, existingKey=${( keys.length > 1 ? keys[keys.length-2] : \"\" )}, existingValue=${current}`, TypeError);\n\n\t\tlet lastKey = keys[keys.length - 1];\n\t\tcurrent[lastKey] = Util.deepMerge(current[lastKey], value);\n\n\t\treturn store;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Check if the store has specified key.\n\t *\n\t * @param\t{Object}\t\tstore\t\t\t\tStore.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to check.\n\t *\n\t * @return\t{Boolean}\t\tTrue:exists, False:not exists.\n\t */\n\tstatic safeHas(store, key)\n\t{\n\n\t\tlet current = store;\n\t\tlet found = true;\n\t\tlet items = key.split(\".\");\n\t\tfor (let i = 0; i < items.length; i++)\n\t\t{\n\t\t\tif (current && typeof current === \"object\" && items[i] in current)\n\t\t\t{\n\t\t\t\tcurrent = current[items[i]];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfound = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn found;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n \t * Execute Javascript code from string.\n\t *\n\t * @param\t{String}\t\tcode\t\t\t\tCode to execute.\n\t * @param\t{Object}\t\tparameters\t\t\tParameters passed to the code.\n\t *\n\t * @return\t{*}\t\t\t\tResult of eval.\n\t */\n\tstatic safeEval(code, parameters)\n\t{\n\n\t\tlet ret = false;\n\n\t\ttry\n\t\t{\n\t\t\tret = Function(`\"use strict\";return (${code})`).apply(parameters);\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\tconsole.error(`Util.safeEval(): Exception occurred. code=${code}, error=${e}`);\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Concatenat path strings appending trainling \"/\" when needed.\n\t *\n\t * @param\t{Array}\t\t\tpaths\t\t\t\tPaths.\n\t *\n\t * @return\t{String}\t\tConcatenated paths\n\t */\n\tstatic concatPath(paths)\n\t{\n\n\t\tlet path = paths[0] || \"\";\n\n\t\tfor (let i = 1; i < paths.length; i++)\n\t\t{\n\t\t\tif (paths[i])\n\t\t\t{\n\t\t\t\tif (path.slice(path.length - 1) === \"/\" && paths[i].slice(0, 1) === \"/\")\n\t\t\t\t{\n\t\t\t\t\t// \"---/\" and \"/---\"\n\t\t\t\t\t// Remove an extra slash\n\t\t\t\t\tpath += paths[i].slice(1);\n\t\t\t\t}\n\t\t\t\telse if (path.slice(path.length - 1) === \"/\" || paths[i].slice(0, 1) === \"/\")\n\t\t\t\t{\n\t\t\t\t\t// \"---/\" or \"/---\"\n\t\t\t\t\t// Just concat\n\t\t\t\t\tpath += paths[i];\n\t\t\t\t}\n\t\t\t\telse if (path)\n\t\t\t\t{\n\t\t\t\t\t// \"---\" + \"---\"\n\t\t\t\t\t// Add an slash between\n\t\t\t\t\tpath += \"/\" + paths[i];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// \"\" + \"---\"\n\t\t\t\t\t// First word, just accept\n\t\t\t\t\tpath = paths[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn path;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Deep merge obj2 into obj1. obj1 will be modified. If you want obj1 to be\n\t * immutable, deep copy it before passing it:\n\t * e.g.) Util.deepMerge(Util.deepClone(obj1), obj2).\n\t * obj2 will be always deep copied.\n\t *\n\t * @param\t{*}\t\t\t\tobj1\t\t\t\t\tObject1.\n\t * @param\t{*}\t\t\t\tobj2\t\t\t\t\tObject2.\n\t *\n\t * @return  {Object}\t\tMerged object.\n\t */\n\tstatic deepMerge(obj1, obj2)\n\t{\n\n\t\tlet result = obj1;\n\n\t\tif (Array.isArray(obj1))\n\t\t{\n\t\t\t// obj1 is an array\n\t\t\tif (Array.isArray(obj2))\n\t\t\t{\n\t\t\t\t// if obj2 is an array, concat them\n\t\t\t\tArray.prototype.push.apply(result, Util.#__cloneArr(obj2));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// if obj2 is not an array, push it\n\t\t\t\tresult.push(Util.deepClone(obj2));\n\t\t\t}\n\t\t}\n\t\telse if (Util.#__isObject(obj1) && Util.#__isMergeable(obj2))\n\t\t{\n\t\t\t// obj1 is an Object and obj2 is an Object/Array\n\t\t\tObject.keys(obj2).forEach((key) => {\n\t\t\t\tresult[key] = Util.deepMerge(obj1[key], obj2[key]);\n\t\t\t});\n\t\t}\n\t\telse if (obj2 === undefined)\n\t\t{\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult = Util.deepClone(obj2);\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Clone an item.\n\t *\n\t * @param\t{Object}\t\ttarget\t\t\t\t\tTarget item.\n\t *\n\t * @return  {Object}\t\tCloned item.\n\t */\n\tstatic deepClone(target)\n\t{\n\n\t\tif (Array.isArray(target))\n\t\t{\n\t\t\treturn Util.#__cloneArr(target);\n\t\t}\n\t\telse if (Util.#__isObject(target))\n\t\t{\n\t\t\treturn Util.#__cloneObj(target);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn target;\n\t\t}\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Get the class name from tag name.\n\t *\n\t * @param\t{String}\t\ttagName\t\t\t\tTag name.\n\t *\n\t * @return  {String}\t\tClass name.\n\t */\n\tstatic getClassNameFromTagName(tagName)\n\t{\n\n\t\tlet className;\n\n\t\tif (tagName === \"bm-unit\")\n\t\t{\n\t\t\tclassName = \"Unit\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet tag = tagName.split(\"-\");\n\t\t\tclassName = tag[0].charAt(0).toUpperCase() + tag[0].slice(1).toLowerCase() + tag[1].charAt(0).toUpperCase() + tag[1].slice(1).toLowerCase();\n\t\t}\n\n\t\treturn className;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get tag name from class name.\n\t *\n\t * @param\t{String}\t\tclassName\t\t\tClass name.\n\t *\n\t * @return \t{String}\t\tTag name.\n\t */\n\tstatic getTagNameFromClassName(className)\n\t{\n\n\t\tlet pos;\n\t\tlet result = className;\n\t\tlet c = className.split(\".\");\n\t\tlet cName = c[c.length - 1];\n\n\t\tfor (pos = 1; pos < cName.length; pos++)\n\t\t{\n\t\t\tif ( Util.#__isUpper(cName.substring(pos, pos + 1)) )\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif ( pos < cName.length )\n\t\t{\n\t\t\tresult = cName.substring(0, pos).toLowerCase() + \"-\" + cName.substring(pos).toLowerCase();\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Assert conditions. Throws an error when assertion failed.\n\t *\n\t * @param\t{Boolean}\t\tconditions\t\t\tConditions.\n\t * @param\t{String/Function}\tMessage\t\t\tError message or Function that return the message.\n\t * @param\t{Error}\t\t\terror\t\t\t\tError to throw.\n\t * @param\t{Options}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return \t{Boolean}\t\tTrue if it is upper case.\n\t */\n\tstatic assert(conditions, msg, error, options)\n\t{\n\n\t\tif (!conditions)\n\t\t{\n\t\t\terror = error || Error;\n\t\t\tmsg = (typeof(msg) === \"function\" ? msg() : msg);\n\t\t\tlet e = new error(msg);\n\n\t\t\t// Remove last stack (assert() itself)\n\t\t\tlet stacks = e.stack.split(\"\\n\");\n\t\t\tstacks.splice(1, 1);\n\t\t\te.stack = stacks.join(\"\\n\");\n\n\t\t\tthrow e;\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Warns when condition failed.\n\t *\n\t * @param\t{Boolean}\t\tconditions\t\t\tConditions.\n\t * @param\t{String/Function}\tMessage\t\t\tError message or Function that return the message.\n\t * @param\t{String}\t\tlevel\t\t\t\tWarn level.\n\t * @param\t{Options}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return \t{Boolean}\t\tTrue if it is upper case.\n\t */\n\tstatic warn(conditions, msg, level, options)\n\t{\n\n\t\tlet ret = true;\n\t\tmsg = (typeof(msg) === \"function\" ? msg() : msg);\n\n\t\tif (!conditions)\n\t\t{\n\t\t\tlevel = level || \"warn\";\n\t\t\tconsole[level](msg);\n\n\t\t\tret = false;\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Return a promise that resolved after random milliseconds.\n\t *\n\t * @param\t{Integer}\t\tmax\t\t\t\t\tMaximum time in milliseconds.\n\t *\n\t * @return \t{Promise}\t\tPromise.\n\t */\n\tstatic randomWait(max, fixed)\n\t{\n\n\t\tlet timeout = ( fixed ? max : Math.floor(Math.random() * max ) );\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tresolve();\n\t\t\t}, timeout);\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Execute query on root node excluding nested components inside.\n\t *\n\t * @param\t{HTMLElement}\trootNode\t\t\tRoot node.\n\t * @param\t{String}\t\tquery\t\t\t\tQuery.\n\t *\n\t * @return  {Array}\t\t\tArray of matched elements.\n\t */\n    static scopedSelectorAll(rootNode, query, options)\n    {\n\n\t\tlet targetNode = ( rootNode === Unit || rootNode instanceof Unit ? rootNode.get(\"inventory\", \"basic.unitRoot\") : rootNode );\n        let newQuery = ( targetNode instanceof DocumentFragment ? query : \":scope \" + query.replace(\",\", \",:scope \"));\n        let allElements = targetNode.querySelectorAll(newQuery);\n\t\tlet allSet = new Set(allElements);\n\t\t/*\n\t\tif (rootNode.matches(query))\n\t\t{\n\t\t\tallSet.add(rootNode);\n\t\t}\n\t\t*/\n\n\t\tif (!options || !options[\"penetrate\"])\n\t\t{\n\t\t\t// Remove elements descendant of other components unless penetrate option is set\n\t\t\tlet removeQuery = ( targetNode instanceof DocumentFragment  ?  \"[bm-powered] \" + query.replace(\",\", \", [bm-powered] \") : \":scope [bm-powered] \" + query.replace(\",\", \", :scope [bm-powered] \" ));\n\t\t\tlet removeElements = targetNode.querySelectorAll(removeQuery);\n\n\t\t\tlet removeSet = new Set(removeElements);\n\t\t\tremoveSet.forEach((item) => {\n\t\t\t\tallSet.delete(item);\n\t\t\t});\n\t\t}\n\n        return Array.from(allSet);\n\n    }\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Convert given target to Javascript object if possible.\n\t *\n\t * @param\t{*}\t\t\t\ttarget\t\t\t\t\tTarget to convert to an object.\n\t * @param\t{Object}\t\toptions\t\t\t\t\tOptions.\n\t *\n\t * @return  {Object}\t\tObject.\n\t */\n\tstatic getObject(target, options)\n\t{\n\n\t\tlet ret;\n\n\t\tif (Util.#__isObject(target))\n\t\t{\n\t\t\tret = target;\n\t\t}\n\t\telse if (typeof(target) === \"string\")\n\t\t{\n\t\t\t// String\n\t\t\tif (options && options[\"format\"] === \"js\")\n\t\t\t{\n\t\t\t\t// Javascript Object\n\t\t\t\tret = Util.safeEval(target, options && options[\"bindTo\"]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// JSON\n\t\t\t\tret = JSON.parse(target);\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if character is upper case.\n\t *\n\t * @param\t{String}\t\tc\t\t\t\t\tCharacter.\n\t *\n\t * @return \t{Boolean}\t\tTrue if it is upper case.\n\t */\n\tstatic #__isUpper(c)\n\t{\n\n\t\treturn c === c.toUpperCase() && c !== c.toLowerCase();\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Follow keys and create missing intermediate objects.\n\t *\n\t * @param\t{Object}\t\tstore\t\t\t\tObject.\n\t * @param\t{Array}\t\t\tkeys\t\t\t\tArray of keys to follow.\n\t *\n\t * @return\t{Object}\t\tObject.\n\t */\n\tstatic #__createIntermediateObject(store, keys)\n\t{\n\n\t\tlet current = store;\n\n\t\tfor (let i = 0; i < keys.length - 1; i++)\n\t\t{\n\t\t\tUtil.assert(current !== null && typeof current === \"object\",\n\t\t\t\t() => `Util.safeSet(): Can't create an intermediate object. Non-object value already exists. existingKey=${( i > 0 ? keys[i-1] : \"\" )}, existingValue=${current}`, TypeError);\n\n\t\t\tif (!(keys[i] in current))\n\t\t\t{\n\t\t\t\tcurrent[keys[i]] = {}\n\t\t\t}\n\n\t\t\tcurrent = current[keys[i]];\n\t\t}\n\n\t\treturn current;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Clone an object.\n\t *\n\t * @param\t{Object}\t\ttarget\t\t\t\t\tTarget object.\n\t *\n\t * @return  {Object}\t\tCloned object.\n\t */\n\tstatic #__cloneObj(target)\n\t{\n\n\t\tlet result = {};\n\n\t\tObject.keys(target).forEach((key) => {\n\t\t\tresult[key] = Util.deepClone(target[key]);\n\t\t});\n\n\t\treturn result;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Clone an array.\n\t *\n\t * @param\t{Object}\t\ttarget\t\t\t\t\tTarget array.\n\t *\n\t * @return  {Object}\t\tCloned array.\n\t */\n\tstatic #__cloneArr(target)\n\t{\n\n\t\tlet result = [];\n\n\t\tfor (let i = 0; i < target.length; i++)\n\t\t{\n\t\t\tresult.push(Util.deepClone(target[i]));\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if the target is object or not.\n\t *\n\t * @param\t{Object}\t\ttarget\t\t\t\t\tTarget item.\n\t *\n\t * @return  {Boolean}\t\tTrue if object.\n\t */\n\tstatic #__isObject(target)\n\t{\n\n\t\tlet type = typeof target;\n\t\tlet conName = (target && target.constructor && target.constructor.name);\n\n\t\treturn (target !== null && conName === \"Object\" && type !== \"function\");\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if the target is mergeable object or not.\n\t *\n\t * @param\t{Object}\t\ttarget\t\t\t\t\tTarget item.\n\t *\n\t * @return  {Boolean}\t\tTrue if mergeable.\n\t */\n\tstatic #__isMergeable(target)\n\t{\n\n\t\treturn Util.#__isObject(target) || Array.isArray(target);\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/master/LICENSE\n */\n// =============================================================================\n\nimport Unit from \"../unit/unit.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tLoader util class\n// =============================================================================\n\nexport default class ClassUtil\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Define new unit in ES5 way.\n\t *\n\t * @param\t{String}\t\tclassName\t\t\tClass name.\n\t * @param\t{Object}\t\tsettings\t\t\tUnit Settings.\n\t * @param\t{Object}\t\tsuperClass\t\t\tSuper class.\n\t * @param\t{String}\t\ttagName\t\t\t\tTag name.\n\t */\n\tstatic newUnit(className, settings, superClass, tagName)\n\t{\n\n\t\tsuperClass = ( superClass ? superClass : Unit );\n\n\t\t// Define class\n\t\tlet funcDef = \"{ return Reflect.construct(superClass, [], this.constructor); }\";\n\t\tlet classDef = Function(\"superClass\", `return function ${ClassUtil.#__validateClassName(className)}()${funcDef}`)(superClass);\n\t\tClassUtil.inherit(classDef, superClass);\n\n\t\t// Class settings\n\t\tsettings = settings || {};\n\t\tsettings.setting = ( settings.setting ? settings.setting : {} );\n\t\tclassDef.prototype._getSettings = function() {\n\t\t\treturn settings;\n\t\t}\n\n\t\t// Define tag\n\t\tif (tagName)\n\t\t{\n\t\t\tcustomElements.define(tagName.toLowerCase(), classDef);\n\t\t}\n\n\t\treturn classDef;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Inherit the unit in ES5 way.\n\t *\n\t * @param\t{Object}\t\tsubClass\t\t\tSub class.\n\t * @param\t{Object}\t\tsuperClass\t\t\tSuper class.\n\t */\n\tstatic inherit(subClass, superClass)\n\t{\n\n\t\tsubClass.prototype = Object.create(superClass.prototype);\n\t\tsubClass.prototype.constructor = subClass;\n//\t\tObject.setPrototypeOf(subClass, superClass); // Disabled for performance sake\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get the class.\n\t *\n\t * @param\t{String}\t\tclassName\t\t\tClass name.\n\t *\n\t * @return  {Object}\t\tClass object.\n\t */\n\tstatic getClass(className)\n\t{\n\n\t\tlet ret;\n\n\t\tif (!ret)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tret = Function(`return (${ClassUtil.#__validateClassName(className)})`)();\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\tif (!(e instanceof ReferenceError))\n\t\t\t\t{\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Validate class name.\n\t *\n\t * @param\t{String}\t\tclassName\t\t\tClass name.\n\t *\n\t * @return  {String}\t\tClass name when valid. Throws an exception when not valid.\n\t */\n\tstatic #__validateClassName(className)\n\t{\n\n\t\tlet result = /^[a-zA-Z0-9\\-\\._]+$/.test(className);\n\t\tUtil.assert(result, () => `ClassUtil.#__validateClassName(): Class name '${className}' is not valid.`, TypeError);\n\n\t\treturn className;\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/master/LICENSE\n */\n// =============================================================================\n\nimport Util from \"./util.js\";\n\n// =============================================================================\n//\tAjax util class\n// =============================================================================\n\nexport default class AjaxUtil\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Make an ajax request.\n\t *\n\t * @param\t{Object}\t\toptions\t\t\t\tRequest options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic ajaxRequest(options)\n\t{\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet url = Util.safeGet(options, \"URL\");\n\t\t\tlet method = Util.safeGet(options, \"method\");\n\t\t\tlet data = Util.safeGet(options, \"data\", \"\");\n\t\t\tlet headers = Util.safeGet(options, \"headers\");\n\t\t\tlet xhrOptions = Util.safeGet(options, \"options\");\n\n\t\t\tlet xhr = new XMLHttpRequest();\n\t\t\txhr.open(method, url, true);\n\n\t\t\t// options\n\t\t\tif (xhrOptions)\n\t\t\t{\n\t\t\t\tObject.keys(xhrOptions).forEach((option) => {\n\t\t\t\t\txhr[option] = xhrOptions[option];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// extra headers\n\t\t\tif (headers)\n\t\t\t{\n\t\t\t\tObject.keys(headers).forEach((header) => {\n\t\t\t\t\txhr.setRequestHeader(header, headers[header]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// callback (load)\n\t\t\txhr.addEventListener(\"load\", () => {\n\t\t\t\tif (xhr.status === 200 || xhr.status === 201)\n\t\t\t\t{\n\t\t\t\t\tresolve(xhr);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treject(xhr);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// callback (error)\n\t\t\txhr.addEventListener(\"error\", () => {\n\t\t\t\treject(xhr);\n\t\t\t});\n\n\t\t\t// send\n\t\t\txhr.send(data);\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load a Javascript file.\n\t *\n\t * @param\t{String}\t\turl\t\t\t\t\tJavascript url.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad Options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic loadScript(url, options)\n\t{\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet script = document.createElement('script');\n\t\t\tscript.src = url;\n\t\t\tscript.async = true;\n\t\t\tif (options && options[\"type\"])\n\t\t\t{\n\t\t\t\tscript.type = options[\"type\"];\n\t\t\t}\n\n\t\t\tscript.onload = () => {\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (e) => {\n\t\t\t\treject(e);\n\t\t\t};\n\n\t\t\tlet head = document.head.appendChild(script);\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load a JSON or Javascript Object file.\n\t *\n\t * @param\t{String}\t\turl\t\t\t\t\tJSON URL.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad Options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic loadJSON(url, options)\n\t{\n\n\t\tlet format = Util.safeGet(options, \"format\", url.split('?')[0].split('.').pop());\n\n\t\tconsole.debug(`AjaxUtil.loadJSON(): Loading a JSON file. URL=${url}, format=${format}`);\n\n\t\treturn AjaxUtil.ajaxRequest({URL:url, method:\"GET\"}).then((xhr) => {\n\t\t\tconsole.debug(`AjaxUtil.loadJSON(): Loaded the JSON file. URL=${url}, format=${format}`);\n\n\t\t\treturn Util.getObject(xhr.responseText, Object.assign({\"format\":format}, options));\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load a Text file.\n\t *\n\t * @param\t{String}\t\turl\t\t\t\t\tHTML URL without extension.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad Options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic loadText(url, options)\n\t{\n\n\t\tconsole.debug(`AjaxUtil.loadText(): Loading a Text file. URL=${url}`);\n\n\t\treturn AjaxUtil.ajaxRequest({URL:url, method:\"GET\"}).then((xhr) => {\n\t\t\tconsole.debug(`AjaxUtil.loadText(): Loaded the Text file. URL=${url}`);\n\n\t\t\treturn xhr.responseText;\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load an HTML file.\n\t *\n\t * @param\t{String}\t\turl\t\t\t\t\tHTML URL.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad Options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic loadHTML(url, options)\n\t{\n\n\t\tconsole.debug(`AjaxUtil.loadHTML(): Loading the HTML file. URL=${url}`);\n\n\t\treturn AjaxUtil.ajaxRequest({URL:url, method:\"GET\"}).then((xhr) => {\n\t\t\tconsole.debug(`AjaxUtil.loadHTML(): Loaded the HTML file. URL=${url}`);\n\n\t\t\treturn xhr.responseText;\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load a CSS file.\n\t *\n\t * @param\t{String}\t\turl\t\t\t\t\tCSS URL.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad Options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic loadCSS(url, options)\n\t{\n\n\t\tconsole.debug(`AjaxUtil.loadCSS(): Loading the CSS file. URL=${url}`);\n\n\t\treturn AjaxUtil.ajaxRequest({URL:url, method:\"GET\"}).then((xhr) => {\n\t\t\tconsole.debug(`AjaxUtil.loadCSS(): Loaded the CSS file. URL=${url}`);\n\n\t\t\treturn xhr.responseText;\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load class files.\n\t *\n\t * @param\t{String}\t\turl\t\t\t\t\tClass URL without extension.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad Options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic loadClass(url, options)\n\t{\n\n\t\tconsole.debug(`AjaxUtil.loadClass(): Loading class files. URL=${url}`);\n\n\t\tlet url1 = url + \".js\";\n\t\tconsole.debug(`AjaxUtil.loadClass(): Loading the first file. URL1=${url1}`);\n\n\t\treturn Promise.resolve().then(() => {\n\t\t\treturn AjaxUtil.loadScript(url1, options);\n\t\t\t/*\n\t\t}).then(() => {\n\t\t\tif (options[\"splitClass\"])\n\t\t\t{\n\t\t\t\tlet url2 = url + \".settings.js\";\n\t\t\t\tconsole.debug(`AjaxUtil.loadClass(): Loading the second file. URL2=${url2}`);\n\t\t\t\treturn AjaxUtil.loadScript(url2, options);\n\t\t\t}\n\t\t\t*/\n\t\t}).then(() => {\n\t\t\tconsole.debug(`AjaxUtil.loadClass(): Loaded the class files. URL=${url}`);\n\t\t});\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/master/LICENSE\n */\n// =============================================================================\n\nimport Util from \"./util.js\";\n\n// =============================================================================\n//\tURL Util Class\n// =============================================================================\n\nexport default class URLUtil\n{\n\n\t/**\n\t * Create options array from the current url.\n\t *\n\t * @param\t{String}\t\turl\t\t\t\t\tURL.\n\t *\n\t * @return  {Array}\t\t\tParameters array.\n\t */\n\tstatic loadParameters(url)\n\t{\n\n\t\turl = url || window.location.href;\n\t\tlet vars = {}\n\t\tlet hash;\n\t\tlet value;\n\n\t\tif (window.location.href.indexOf(\"?\") > -1)\n\t\t{\n\t\t\tlet hashes = url.slice(url.indexOf('?') + 1).split('&');\n\n\t\t\tfor(let i = 0; i < hashes.length; i++) {\n\t\t\t\thash = hashes[i].split('=');\n\t\t\t\tif (hash[1]){\n\t\t\t\t\tvalue = hash[1].split('#')[0];\n\t\t\t\t} else {\n\t\t\t\t\tvalue = hash[1];\n\t\t\t\t}\n\t\t\t\tvars[hash[0]] = decodeURIComponent(value);\n\t\t\t}\n\t\t}\n\n\t\treturn vars;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Build url from route info.\n\t *\n\t * @param\t{Object}\t\trouteInfo\t\t\tRoute information.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {String}\t\tURL.\n\t */\n\tstatic buildURL(routeInfo, options)\n\t{\n\n\t\tlet newURLInfo = Object.assign({}, URLUtil.parseURL(), routeInfo);\n\t\tlet url = (routeInfo[\"URL\"] ? routeInfo[\"URL\"] : Util.concatPath([newURLInfo[\"protocol\"] + \"//\", newURLInfo[\"host\"], newURLInfo[\"pathname\"]]));\n\n\t\tif (newURLInfo[\"queryParameters\"])\n\t\t{\n\t\t\tlet params = {};\n\t\t\tif (options && options[\"mergeParameters\"])\n\t\t\t{\n\t\t\t\tparams = Object.assign(params, URLUtil.loadParameters());\n\t\t\t}\n\t\t\tparams = Object.assign(params, newURLInfo[\"queryParameters\"]);\n\t\t\turl += URLUtil.buildQuery(params);\n\t\t}\n\t\telse\n\t\t{\n\t\t\turl += newURLInfo[\"query\"];\n\t\t}\n\n\t\treturn ( url ? url : \"/\" );\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Build query string from the options object.\n\t *\n\t * @param\t{Object}\t\toptions\t\t\t\tQuery options.\n\t *\n\t * @return\t{String}\t\tQuery string.\n\t */\n\tstatic buildQuery(options)\n\t{\n\n\t\tlet query = \"\";\n\n\t\tif (options)\n\t\t{\n\t\t\tquery = Object.keys(options).reduce((result, current) => {\n\t\t\t\tif (Array.isArray(options[current]))\n\t\t\t\t{\n\t\t\t\t\tresult += `${encodeURIComponent(current)}=${encodeURIComponent(options[current].join())}&`;\n\t\t\t\t}\n\t\t\t\telse if (options[current])\n\t\t\t\t{\n\t\t\t\t\tresult += `${encodeURIComponent(current)}=${encodeURIComponent(options[current])}&`;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, \"\");\n\t\t}\n\n\t\treturn ( query ? `?${query.slice(0, -1)}` : \"\");\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Parse URL.\n\t *\n\t * @param\t{String}\t\turl\t\t\t\t\tURL to parse.\n\t *\n\t * @return \t{Object}\t\tObject contains each URL part.\n\t */\n\tstatic parseURL(url)\n\t{\n\n\t\turl = url || window.location.href;\n\t\tlet parsed = new URL(url, window.location.href);\n\t\tlet ret = {\n\t\t\t\"protocol\": parsed.protocol,\n\t\t\t\"username\":\tparsed.username,\n\t\t\t\"password\":\tparsed.password,\n\t\t\t\"host\":\t\tparsed.host,\n\t\t\t\"hostname\": parsed.hostname,\n\t\t\t\"port\":\t\tparsed.port,\n\t\t\t\"pathname\":\tparsed.pathname,\n\t\t\t\"path\":\t\tparsed.pathname.substring(0, parsed.pathname.lastIndexOf(\"/\") + 1),\n\t\t\t\"search\": \tparsed.search,\n\t\t\t\"query\": \tparsed.search,\n\t\t\t\"hash\": \tparsed.hash,\n\t\t\t\"filename\":\tparsed.pathname.split(\"/\").pop(),\n\t\t\t\"queryParameters\": URLUtil.loadParameters(url),\n\t\t};\n\t\tret[\"filenameWithoutExtension\"] = ret[\"filename\"].split(\".\")[0];\n\t\tret[\"extension\"] = ret[\"filename\"].split(\".\").pop();\n\n\t\treturn ret;\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/master/LICENSE\n */\n// =============================================================================\n\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tStore class\n// =============================================================================\n\nexport default class Store\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Constructor\n\t// -------------------------------------------------------------------------\n\n\t/**\n     * Constructor.\n     *\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n     */\n\tconstructor(options)\n\t{\n\n\t\t// Init\n\t\tthis._options = options || {};\n\t\tthis._items = Util.safeGet(options, \"items\", {});\n\t\tthis.merger = Util.safeGet(options, \"merger\", Util.deepMerge);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Setter/Getter\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Options.\n\t *\n\t * @type\t{Object}\n\t */\n\tget options()\n\t{\n\n\t\treturn this._options;\n\n\t}\n\n\tset options(value)\n\t{\n\n\t\tthis._options = value;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Items.\n\t *\n\t * @type\t{String}\n\t */\n\tget items()\n\t{\n\n\t\treturn this.clone();\n\n\t}\n\n\tset items(value)\n\t{\n\n\t\tthis._items = value;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Merge function.\n\t *\n\t * @type\t{Function}\n\t */\n\tget merger()\n\t{\n\n\t\tthis._merger;\n\n\t}\n\n\tset merger(value)\n\t{\n\n\t\tUtil.assert(typeof value === \"function\", `Store.merger(setter): Merger is not a function. merger=${value}`, TypeError);\n\n\t\tthis._merger = value;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Method\n\t// -------------------------------------------------------------------------\n\n\t/**\n     * Clear.\n     *\n\t * @param\t{Object}\t\tcomponent\t\t\tComponent to attach.\n\t * @param\t{Object}\t\toptions\t\t\t\tPlugin options.\n     */\n\tclear()\n\t{\n\n\t\tthis._items = {};\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n     * Clone contents as an object.\n     *\n\t * @return  {Object}\t\tCloned items.\n     */\n\tclone()\n\t{\n\n\t\treturn Util.deepMerge({}, this._items);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Merge items.\n\t *\n\t * @param\t{Array/Object}\tnewItems\t\t\tArray/Object of Items to merge.\n\t * @param\t{Function}\t\tmerger\t\t\t\tMerge function.\n\t */\n\tmerge(newItems, merger)\n\t{\n\n\t\tmerger = merger || this._merger;\n\t\tlet items = (Array.isArray(newItems) ? newItems: [newItems]);\n\n\t\tfor (let i = 0; i < items.length; i++)\n\t\t{\n\t\t\tthis._items = merger(this._items, items[i]);\n\t\t}\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Get the value from store. Return default value when specified key is not available.\n\t *\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to get.\n\t * @param\t{Object}\t\tdefaultValue\t\tValue returned when key is not found.\n\t *\n\t * @return  {*}\t\t\t\tValue.\n\t */\n\tget(key, defaultValue)\n\t{\n\n\t\treturn Util.deepClone(Util.safeGet(this._items, key, defaultValue));\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Set the value to the store. If key is empty, it sets the value to the root.\n\t *\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to store.\n\t * @param\t{Object}\t\tvalue\t\t\t\tValue to store.\n\t */\n\tset(key, value, options)\n\t{\n\n\t\tUtil.safeSet(this._items, key, value);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Remove from the list.\n\t *\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to store.\n\t */\n\tremove(key)\n\t{\n\n\t\tUtil.safeRemove(this._items, key);\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Check if the store has specified key.\n\t *\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to check.\n\t *\n\t * @return\t{Boolean}\t\tTrue:exists, False:not exists.\n\t */\n\thas(key)\n\t{\n\n\t\treturn Util.safeHas(this._items, key);\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/master/LICENSE\n */\n// =============================================================================\n\nimport Store from \"./store.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tChainable store class\n// =============================================================================\n\nexport default class ChainableStore extends Store\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Constructor\n\t// -------------------------------------------------------------------------\n\n\t/**\n     * Constructor.\n     *\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t * @param\t{Store}\t\t\tchain\t\t\t\tStore Component to chain.\n     */\n\tconstructor(options)\n\t{\n\n\t\tsuper(options);\n\n\t\t// Init vars\n\t\tthis._chain;\n\n\t\t// Chain\n\t\tlet chain = Util.safeGet(this._options, \"chain\");\n\t\tif (chain)\n\t\t{\n\t\t\tthis.chain(chain);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Setter/Getter\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Local items.\n\t *\n\t * @type\t{Object}\n\t */\n\tget localItems()\n\t{\n\n\t\treturn Store.prototype.clone.call(this);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Method\n\t// -------------------------------------------------------------------------\n\n\t/**\n     * Clone contents as an object (Override).\n     *\n\t * @return  {Object}\t\tCloned items.\n     */\n\tclone()\n\t{\n\n\t\tif (this._chain)\n\t\t{\n\t\t\treturn Util.deepMerge(this._chain.clone(), this._items);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Store.prototype.clone.call(this);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n     * Chain another store.\n     *\n\t * @param\t{Store}\t\t\tstore\t\t\t\tStore to chain.\n     */\n\tchain(store)\n\t{\n\n\t\tthis._chain = store;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Get the value from store. If chained, return from chained store when not available.\n\t * Return default value when not available in both stores.\n\t * When both has keys, then they are deep merged. Note that they are merged only when\n\t * chain has mergeable value, an object or an array.\n\t *\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to get.\n\t * @param\t{Object}\t\tdefaultValue\t\tValue returned when key is not found.\n\t *\n\t * @return  {*}\t\t\t\tValue.\n\t */\n\tget(key, defaultValue)\n\t{\n\n\t\tlet result = defaultValue;\n\n\t\tif (Store.prototype.has.call(this, key) && this._chain && Store.prototype.has.call(this._chain, key))\n\t\t{\n\t\t\t// Both has key then deep merge\n\t\t\tresult = Util.deepMerge(Store.prototype.get.call(this._chain, key), Store.prototype.get.call(this, key));\n\t\t}\n\t\telse if (Store.prototype.has.call(this, key))\n\t\t{\n\t\t\t// Only this has key\n\t\t\tresult = Store.prototype.get.call(this, key, defaultValue);\n\t\t}\n\t\telse if (this._chain)\n\t\t{\n\t\t\t// Only chain has key\n\t\t\tresult = this._chain.get(key, defaultValue);\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Merge items.\n\t *\n\t * @param\t{Array/Object}\tnewItems\t\t\tArray/Object of Items to merge.\n\t * @param\t{Function}\t\tmerger\t\t\t\tMerge function.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t */\n\tmerge(newItems, merger, options)\n\t{\n\n\t\tif (Util.safeGet(options, \"writeThrough\", this._options[\"writeThrough\"]))\n\t\t{\n\t\t\tthis._chain.merge(newItems, merger);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tStore.prototype.merge.call(this, newItems, merger);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Set the value to the store. If key is empty, it sets the value to the root.\n\t *\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to store.\n\t * @param\t{Object}\t\tvalue\t\t\t\tValue to store.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t */\n\tset(key, value, options)\n\t{\n\n\t\tif (Util.safeGet(options, \"writeThrough\", this._options[\"writeThrough\"]))\n\t\t{\n\t\t\tthis._chain.set(key, value, options);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tStore.prototype.set.call(this, key, value, options);\n\t\t}\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Check if the store has specified key.\n\t *\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey to check.\n\t *\n\t * @return\t{Boolean}\t\tTrue:exists, False:not exists.\n\t */\n\thas(key)\n\t{\n\n\t\tlet result = Util.safeHas(this._items, key);\n\n\t\tif (result === false && this._chain)\n\t\t{\n\t\t\tresult = this._chain.has(key);\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/main/LICENSE\n */\n// =============================================================================\n\nimport ChainableStore from \"../store/chainable-store.js\";\nimport Unit from \"../unit/unit.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tBase Perk Class\n// =============================================================================\n\nexport default class Perk\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__perks = {}\n\tstatic #__sections = {};\n\tstatic #__handlers = {\"common\": {}};\n\tstatic #__info = {\n\t\t\"sectionName\":\t\t\"perk\",\n\t\t\"order\":\t\t\t0,\n\t};\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Perk info.\n\t *\n\t * @type\t{Object}\n\t */\n\tstatic get info()\n\t{\n\n\t\treturn Perk.#__info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Promise that is resolved when Perk is ready.\n\t *\n\t * @type\t{Object}\n\t */\n\tstatic get ready()\n\t{\n\n\t\treturn Promise.resolve();\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t *  Initialize an perk and Unit class when the perk is registered.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return \t{Promise}\t\tPromise.\n\t */\n\tstatic globalInit()\n\t{\n\n\t\tif (this === Perk)\n\t\t{\n\t\t\tUnit.upgrade(\"spell\", \"perk.attachPerks\", Perk.#_attachPerks);\n\t\t\tUnit.upgrade(\"spell\", \"perk.attach\", Perk.#_attach);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t *  Initialize an attached unit when perk is attached.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return \t{Promise}\t\tPromise.\n\t */\n\tstatic init(unit, options)\n\t{\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Deinitialize the unit when perk is detached.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return \t{Promise}\t\tPromise.\n\t */\n\tstatic deinit(unit, options)\n\t{\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Register the perk.\n\t *\n\t * @param\t{Perk}\t\tperk\t\t\tPerk to register.\n\t */\n\tstatic registerPerk(perk)\n\t{\n\n\t\tlet info = perk.info;\n\t\tinfo[\"sectionName\"] = info[\"sectionName\"];\n\t\tinfo[\"order\"] = (\"order\" in info ? info[\"order\"] : 500);\n\t\tinfo[\"depends\"] = info[\"depends\"] || [];\n\t\tinfo[\"depends\"] = ( Array.isArray(info[\"depends\"]) ? info[\"depends\"] : [info[\"depends\"]] );\n\n\t\tPerk.#__perks[perk.name] = {\n\t\t\t\"name\":\t\t\tperk.name,\n\t\t\t\"object\":\t\tperk,\n\t\t\t\"sectionName\":\tinfo[\"sectionName\"],\n\t\t\t\"order\":\t\tinfo[\"order\"],\n\t\t\t\"depends\":\t\tinfo[\"depends\"],\n\t\t};\n\n\t\t// Create target word index\n\t\tPerk.#__sections[info[\"sectionName\"]] = Perk.#__perks[perk.name];\n\n\t\t// Global init\n\t\treturn perk.globalInit();\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get the perk.\n\t *\n\t * @param\t{String}\tperkName\t\tPerk name.\n\t */\n\tstatic getPerk(perkName)\n\t{\n\n\t\tUtil.assert(perkName in Perk.#__perks, () => `Perk \"${perkName}\" doesn't exist.`);\n\n\t\treturn Perk.#__perks[perkName].object;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get the perk from the section name.\n\t *\n\t * @param\t{String}\tsectionName\t\tSection name.\n\t */\n\tstatic getPerkFromSectionName(sectionName)\n\t{\n\n\t\tUtil.assert(sectionName in Perk.#__sections, () => `Perk for section \"${sectionName}\" doesn't exist.`);\n\n\t\treturn Perk.#__sections[sectionName].object;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Register the handler.\n\t *\n\t * @param\t{Function}\thandler\t\t\tHandler to register.\n\t */\n\tstatic registerHandler(handler, perkName)\n\t{\n\n\t\tperkName = perkName || this.name;\n\n\t\tif (!Perk.#__handlers[perkName])\n\t\t{\n\t\t\tPerk.#__handlers[perkName] = {};\n\t\t}\n\n\t\tPerk.#__handlers[perkName][handler.name] = handler;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Create the handler.\n\t *\n\t * @param\t{String}\thandlerName\t\tHandler name.\n\t * @param\t{*}\t\t\t...args\t\t\tArguments to the handler constructor.\n\t */\n\tstatic createHandler(handlerName, ...args)\n\t{\n\n\t\tlet handler = (Perk.#__handlers[this.name] && Perk.#__handlers[this.name][handlerName]) || Perk.#__handlers[\"common\"][handlerName];\n\n\t\tUtil.assert(handler, () => `Perk.createHandler(): Handler '${handlerName}' is not registered.`, ReferenceError);\n\n\t\treturn new handler(...args);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Spells (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Attach new perks to unit according to settings.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t */\n\tstatic #_attachPerks(unit, options)\n\t{\n\n\t\tlet settings = options[\"settings\"];\n\t\tlet chain = Promise.resolve();\n\t\tlet targets = Perk.#__listNewPerks(unit, settings);\n\n\t\tPerk.#__sortItems(targets).forEach((perkName) => {\n\t\t\tchain = chain.then(() => {\n\t\t\t\treturn Perk.#_attach(unit, Perk.#__perks[perkName].object, options);\n\t\t\t});\n\t\t});\n\n\t\treturn chain;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Attach a perk to the unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit to be attached.\n\t * @param\t{Perk}\t\t\tperk\t\t\t\tPerk to attach.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return \t{Promise}\t\tPromise.\n\t */\n\tstatic #_attach(unit, perk, options)\n\t{\n\n\t\tif (!unit.assets[\"perk\"][perk.name])\n\t\t{\n\t\t\t// Attach dependencies first\n\t\t\tlet deps = Perk.#__perks[perk.name][\"depends\"];\n\t\t\tfor (let i = 0; i < deps.length; i++)\n\t\t\t{\n\t\t\t\tPerk.#_attach(unit, Perk.#__perks[deps[i]].object, options);\n\t\t\t}\n\t\t\tunit.assets[\"perk\"][perk.name] = perk;\n\n\t\t\treturn perk.init(unit, options);\n\t\t}\n\n\t}\n\n\t// ------------------------------------------------------------------------\n\t//  Privates\n\t// ------------------------------------------------------------------------\n\n\t/**\n\t * List not-attached perks according to settings.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\tsettings\t\t\tSettings.\n\t */\n\tstatic #__listNewPerks(unit, settings)\n\t{\n\n\t\tlet targets = {};\n\t\tlet chain = Promise.resolve();\n\n\t\t// List new perks from \"perk\" section\n\t\tlet perks = Util.safeGet(settings, \"perk.options.apply\");\n\t\tif (perks)\n\t\t{\n\t\t\tfor (let i = 0; i < perks.length; i++)\n\t\t\t{\n\t\t\t\tlet perkName = perks[i];\n\t\t\t\tUtil.assert(Perk.#__perks[perkName], `Perk.#__listNewPerk(): Perk not found. name=${unit.tagName}, perkName=${perkName}`);\n\t\t\t\tif (!unit.assets[\"perk\"][perkName])\n\t\t\t\t{\n\t\t\t\t\ttargets[perkName] = Perk.#__perks[perkName];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// List new perks from settings keyword\n\t\tObject.keys(settings).forEach((key) => {\n\t\t\tlet perkInfo = Perk.#__sections[key];\n\n\t\t\tif (perkInfo && !unit.assets[\"perk\"][perkInfo.name])\n\t\t\t{\n\t\t\t\ttargets[perkInfo.name] = perkInfo\n\t\t\t}\n\t\t});\n\n\t\treturn targets;\n\n\t}\n\n\t// ------------------------------------------------------------------------\n\n\t/**\n\t * Sort item keys.\n\t *\n\t * @param\t{Object}\t\tobserverInfo\t\tObserver info.\n\t *\n\t * @return  {Array}\t\t\tSorted keys.\n\t */\n\tstatic #__sortItems(perks)\n\t{\n\n\t\treturn Object.keys(perks).sort((a,b) => {\n\t\t\treturn perks[a][\"order\"] - perks[b][\"order\"];\n\t\t})\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/main/LICENSE\n */\n// =============================================================================\n\nimport ChainableStore from \"../store/chainable-store.js\";\nimport Perk from \"./perk.js\";\nimport Store from \"../store/store.js\";\nimport Unit from \"../unit/unit.js\";\nimport URLUtil from \"../util/url-util.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tBasic Perk Class\n// =============================================================================\n\nexport default class BasicPerk extends Perk\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__ready;\n\tstatic #__ready_resolve;\n\tstatic #__unitInfo = {};\n\tstatic #__indexes = {\n\t\t\"tagName\":\t\t\t{},\n\t\t\"className\":\t\t{},\n\t\t\"id\":\t\t\t\t{},\n\t};\n\tstatic #__info = {\n\t\t\"sectionName\":\t\t\"basic\",\n\t\t\"order\":\t\t\t0,\n\t};\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\tstatic get info()\n\t{\n\n\t\treturn BasicPerk.#__info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic get ready()\n\t{\n\n\t\treturn BasicPerk.#__ready;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\tstatic globalInit()\n\t{\n\n\t\t// Init Vars\n\t\tBasicPerk.#__ready = new Promise((resolve, reject) => {\n\t\t\tBasicPerk.#__ready_resolve = resolve;\n\t\t});\n\n\t\t// Upgrade Unit\n\t\tUnit.upgrade(\"asset\", \"inventory\", new ChainableStore());\n\t\tUnit.upgrade(\"asset\", \"skill\", new ChainableStore());\n\t\tUnit.upgrade(\"asset\", \"spell\", new ChainableStore());\n\t\tUnit.upgrade(\"callback\", \"initializeCallback\", BasicPerk.#_initializeHandler.bind(BasicPerk));\n\t\tUnit.upgrade(\"callback\", \"connectedCallback\", BasicPerk.#_connectedHandler.bind(BasicPerk));\n\t\tUnit.upgrade(\"callback\", \"disconnectedCallback\", BasicPerk.#_disconnectedHandler.bind(BasicPerk));\n\t\tUnit.upgrade(\"callback\", \"adoptedCallback\", BasicPerk.#_connectedHandler.bind(BasicPerk));\n\t\tUnit.upgrade(\"callback\", \"attributeChangedCallback\", BasicPerk.#_attributeChangedHandler.bind(BasicPerk));\n\t\tUnit.upgrade(\"method\", \"use\", BasicPerk.#_use);\n\t\tUnit.upgrade(\"method\", \"cast\", BasicPerk.#_cast);\n\t\tUnit.upgrade(\"skill\", \"basic.scan\", BasicPerk.#_scan);\n\t\tUnit.upgrade(\"skill\", \"basic.scanAll\", BasicPerk.#_scanAll);\n\t\tUnit.upgrade(\"skill\", \"basic.locate\", BasicPerk.#_locate);\n\t\tUnit.upgrade(\"skill\", \"basic.locateAll\", BasicPerk.#_locateAll);\n\t\tUnit.upgrade(\"spell\", \"basic.start\", BasicPerk.#_start);\n\t\tUnit.upgrade(\"spell\", \"basic.stop\", BasicPerk.#_stop);\n\t\tUnit.upgrade(\"spell\", \"basic.transform\", BasicPerk.#_transform);\n\t\tUnit.upgrade(\"spell\", \"basic.setup\", BasicPerk.#_setup);\n\t\tUnit.upgrade(\"spell\", \"basic.refresh\", BasicPerk.#_refresh);\n\t\tUnit.upgrade(\"spell\", \"basic.fetch\", BasicPerk.#_fetch);\n\t\tUnit.upgrade(\"spell\", \"basic.fill\", BasicPerk.#_fill);\n\t\tUnit.upgrade(\"spell\", \"basic.clear\", BasicPerk.#_clear);\n\n\t\t// Set Unit's unitRoot to document.body when document is ready\n\t\tif ((document.readyState === \"interactive\" || document.readyState === \"complete\"))\n\t\t{\n\t\t\tUnit.set(\"inventory\", \"basic.unitRoot\", document.body);\n\t\t\tBasicPerk.#__ready_resolve();\n\t\t\tBasicPerk.#__ready_resolve = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\t\t\tUnit.set(\"inventory\", \"basic.unitRoot\", document.body);\n\t\t\t\tBasicPerk.#__ready_resolve();\n\t\t\t\tBasicPerk.#__ready_resolve = null;\n\t\t\t});\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Callbacks (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Initialize callback handler.\n\t */\n\tstatic #_initializeHandler(unit)\n\t{\n\n\t\t// Register unit\n\t\tBasicPerk.#__register(unit);\n\n\t\t// Upgrade unit\n\t\tunit.upgrade(\"asset\", \"perk\", {});\n\t\tunit.upgrade(\"asset\", \"inventory\", new ChainableStore({\"chain\":Unit.assets[\"inventory\"]}));\n\t\tunit.upgrade(\"asset\", \"skill\", new ChainableStore({\"chain\":Unit.assets[\"skill\"]}));\n\t\tunit.upgrade(\"asset\", \"spell\", new ChainableStore({\"chain\":Unit.assets[\"spell\"]}));\n\t\tunit.upgrade(\"method\", \"use\", BasicPerk.#_use);\n\t\tunit.upgrade(\"method\", \"cast\", BasicPerk.#_cast);\n\t\tunit.upgrade(\"inventory\", \"basic.unitRoot\", unit);\n\n\t\t// Attach default perks\n\t\tlet chain = Promise.resolve();\n\t\t[\"BasicPerk\", \"SettingPerk\",\"UnitPerk\",\"StatusPerk\",\"EventPerk\", \"SkinPerk\", \"StylePerk\"].forEach((perkName) => {\n\t\t\tchain = chain.then(() => {\n\t\t\t\treturn unit.cast(\"perk.attach\", Perk.getPerk(perkName));\n\t\t\t});\n\t\t});\n\n\t\treturn chain.then(() => {\n\t\t\treturn unit.cast(\"basic.start\");\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Connected callback handler.\n\t */\n\tstatic #_connectedHandler(unit)\n\t{\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Disconnected callback handler.\n\t */\n\tstatic #_disconnectedHandler(unit)\n\t{\n\n\t\treturn unit.cast(\"basic.stop\");\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Adopted callback handler.\n\t */\n\tstatic #_adoptedHandler(unit)\n\t{\n\n\t\treturn unit.cast(\"event.trigger\", \"afterAdopt\");\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Attribute changed callback handler.\n\t */\n\tstatic #_attributeChangedHandler(unit, name, oldValue, newValue)\n\t{\n\n\t\treturn unit.cast(\"event.trigger\", \"afterAttributeChange\", {\"name\":name, \"oldValue\":oldValue, \"newValue\":newValue});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Call the aynchronous function.\n\t *\n\t * @param\t{String}\t\tassetName\t\t\tAsset name.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey.\n\t * @param\t{*}\t\t\t\t...args\t\t\t\tArguments.\n\t */\n\tstatic #_cast(key, ...args)\n\t{\n\n\t\tlet func = this.assets[\"spell\"].get(key);\n\t\tUtil.assert(typeof(func) === \"function\", () => `Spell is not available. spellName=${key}`);\n\n\t\treturn func.call(this, this, ...args);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Call the synchronous function.\n\t *\n\t * @param\t{String}\t\tassetName\t\t\tAsset name.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey.\n\t * @param\t{*}\t\t\t\t...args\t\t\t\tArguments.\n\t */\n\tstatic #_use(key, ...args)\n\t{\n\n\t\tlet func = this.assets[\"skill\"].get(key);\n\t\tUtil.assert(typeof(func) === \"function\", () => `Skill is not available. skillName=${key}`);\n\n\t\treturn func.call(this, this, ...args);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Skills (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get elements inside the unit speicified by the query.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tquery\t\t\t\tQuery.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {NodeList}\t\tElements.\n\t */\n\tstatic #_scanAll(unit, query, options)\n\t{\n\n\t\treturn Util.scopedSelectorAll(unit, query, options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get the first element inside the unit speicified by the query.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tquery\t\t\t\tQuery.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {HTMLElement}\tElement.\n\t */\n\tstatic #_scan(unit, query, options)\n\t{\n\n\t\tlet nodes = Util.scopedSelectorAll(unit, query, options);\n\n\t\treturn ( nodes ? nodes[0] : null );\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Locate all the unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object/String/Unit}\ttarget\t\tTarget to locate.\n\t *\n\t * @return  {HTMLElement}\tTarget element.\n\t */\n\tstatic #_locateAll(unit, target)\n\t{\n\n\t\tif (typeof(target) === \"object\")\n\t\t{\n\t\t\tif (\"selector\" in target)\n\t\t\t{\n\t\t\t\treturn document.querySelectorAll(target[\"selector\"]);\n\t\t\t}\n\t\t\telse if (\"scan\" in target)\n\t\t\t{\n\t\t\t\tlet nodes = unit.use(\"basic.scan\", target[\"scan\"]);\n\t\t\t\treturn unit.use(\"basic.scanAll\", target[\"scan\"]);\n\t\t\t}\n\t\t\telse if (\"uniqueId\" in target)\n\t\t\t{\n\t\t\t\treturn [BasicPerk.#__unitInfo[target[\"uniqueId\"]].object];\n\t\t\t}\n\t\t\telse if (\"tagName\" in target)\n\t\t\t{\n\t\t\t\treturn BasicPerk.#__indexes[\"tagName\"][target[\"tagName\"].toUpperCase()];\n\t\t\t}\n\t\t\telse if (\"object\" in target)\n\t\t\t{\n\t\t\t\treturn [target[\"object\"]];\n\t\t\t}\n\t\t\telse if (\"id\" in target)\n\t\t\t{\n\t\t\t\treturn BasicPerk.#__indexes[\"id\"][target[\"id\"]];\n\t\t\t}\n\t\t\telse if (\"className\" in target)\n\t\t\t{\n\t\t\t\treturn BasicPerk.#__indexes[\"className\"][target[\"className\"]];\n\t\t\t}\n\t\t}\n\t\telse if (typeof(target) === \"string\")\n\t\t{\n\t\t\treturn BasicPerk.#__indexes[\"tagName\"][target.toUpperCase()];\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn [target];\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Locate the unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object/String/Unit}\ttarget\t\tTarget to locate.\n\t *\n\t * @return  {HTMLElement}\tTarget element.\n\t */\n\tstatic #_locate(unit, target)\n\t{\n\n\t\tlet units = BasicPerk.#_locateAll(unit, target);\n\n\t\tif (units)\n\t\t{\n\t\t\treturn units[0];\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Spells (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Start unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_start(unit, options)\n\t{\n\n\t\tconsole.debug(`BasicPerk._start(): Starting unit. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"setting.apply\", {\"settings\":unit.assets[\"setting\"].items});\n\t\tawait unit.cast(\"event.trigger\", \"beforeStart\");\n\t\tunit.use(\"status.change\", \"starting\");\n\t\tif (unit.get(\"setting\", \"basic.options.autoTransform\", true))\n\t\t{\n\t\t\tawait unit.cast(\"basic.transform\", {\"skinName\": \"default\", \"styleName\": \"default\"});\n\t\t}\n\t\tawait unit.cast(\"event.trigger\", \"doStart\");\n\t\tif (unit.get(\"setting\", \"basic.options.autoRefresh\", true))\n\t\t{\n\t\t\tawait unit.cast(\"basic.refresh\");\n\t\t}\n\t\tconsole.debug(`BasicPerk._start(): Started unit. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tunit.use(\"status.change\", \"started\");\n\t\tawait unit.cast(\"event.trigger\", \"afterStart\");\n\t\tconsole.debug(`BasicPerk._start(): Unit is ready. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tunit.use(\"status.change\", \"ready\");\n\t\tawait unit.cast(\"event.trigger\", \"afterReady\");\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Stop unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions for the unit.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_stop(unit, options)\n\t{\n\n\t\toptions = options || {};\n\n\t\tconsole.debug(`BasicPerk._stop(): Stopping unit. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tunit.use(\"status.change\", \"stopping\");\n\t\tawait unit.cast(\"event.trigger\", \"beforeStop\", options);\n\t\tawait unit.cast(\"event.trigger\", \"doStop\", options);\n\t\tconsole.debug(`BasicPerk._stop(): Stopped unit. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tunit.use(\"status.change\", \"stopped\");\n\t\tawait unit.cast(\"event.trigger\", \"afterStop\", options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Transform unit (Load HTML and attach to node).\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_transform(unit, options)\n\t{\n\n\t\toptions = options || {};\n\n\t\tconsole.debug(`BasicPerk._transform(): Transforming. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"beforeTransform\", options);\n\t\tif (unit.get(\"setting\", \"basic.options.autoSetup\", true))\n\t\t{\n\t\t\tawait unit.cast(\"basic.setup\", options);\n\t\t}\n\t\tawait unit.cast(\"event.trigger\", \"doTransform\", options);\n\t\tawait unit.cast(\"unit.materializeAll\", unit);\n\t\tconsole.debug(`BasicPerk._transform(): Transformed. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"afterTransform\", options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Setup unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_setup(unit, options)\n\t{\n\n\t\toptions = options || {};\n\n\t\tconsole.debug(`BasicPerk._setup(): Setting up unit. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"beforeSetup\", options);\n\t\tawait unit.cast(\"event.trigger\", \"doSetup\", options);\n\t\tconsole.debug(`BasicPerk._setup(): Set up unit. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"afterSetup\", options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Refresh unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_refresh(unit, options)\n\t{\n\n\t\toptions = options || {};\n\n\t\tconsole.debug(`BasicPerk._refresh(): Refreshing unit. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"beforeRefresh\", options);\n\t\tlet autoClear = Util.safeGet(options, \"autoClear\", unit.get(\"setting\", \"basic.options.autoClear\", true));\n\t\tif (autoClear)\n\t\t{\n\t\t\tawait unit.cast(\"basic.clear\", options);\n\t\t}\n\t\tif (Util.safeGet(options, \"autoFetch\", unit.get(\"setting\", \"basic.options.autoFetch\", true)))\n\t\t{\n\t\t\tawait unit.cast(\"basic.fetch\", options);\n\t\t}\n\t\tif (Util.safeGet(options, \"autoFill\", unit.get(\"setting\", \"basic.options.autoFill\", true)))\n\t\t{\n\t\t\tawait unit.cast(\"basic.fill\", options);\n\t\t}\n\t\tawait unit.cast(\"event.trigger\", \"doRefresh\", options);\n\t\tconsole.debug(`BasicPerk._refresh(): Refreshed unit. name=${unit.tagName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"afterRefresh\", options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Fetch data.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_fetch(unit, options)\n\t{\n\n\t\toptions = options || {};\n\n\t\tconsole.debug(`BasicPerk._fetch(): Fetching data. name=${unit.tagName}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"beforeFetch\", options);\n\t\tawait unit.cast(\"event.trigger\", \"doFetch\", options);\n\t\tawait unit.cast(\"event.trigger\", \"afterFetch\", options);\n\t\tconsole.debug(`BasicPerk._fetch(): Fetched data. name=${unit.tagName}, uniqueId=${unit.uniqueId}`);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Fill unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_fill(unit, options)\n\t{\n\n\t\toptions = options || {};\n\n\t\tconsole.debug(`BasicPerk._fill(): Filling with data. name=${unit.tagName}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"beforeFill\", options);\n\t\tawait unit.cast(\"event.trigger\", \"doFill\", options);\n\t\tconsole.debug(`BasicPerk._fill(): Filled with data. name=${unit.tagName}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"afterFill\", options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Clear unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_clear(unit, options)\n\t{\n\n\t\toptions = options || {};\n\n\t\tconsole.debug(`BasicPerk._clear(): Clearing the unit. name=${unit.tagName}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"beforeClear\", options);\n\t\tawait unit.cast(\"event.trigger\", \"doClear\", options);\n\t\tconsole.debug(`BasicPerk._clear(): Cleared the unit. name=${unit.tagName}, uniqueId=${unit.uniqueId}`);\n\t\tawait unit.cast(\"event.trigger\", \"afterClear\", options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Register the unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {HTMLElement}\tElement.\n\t */\n\tstatic #__register(unit, options)\n\t{\n\n\t\tlet c = customElements.get(unit.tagName.toLowerCase());\n\n\t\tBasicPerk.#__unitInfo[unit.uniqueId] = {\n\t\t\t\"object\":\t\tunit,\n\t\t\t\"class\":\t\tc,\n\t\t};\n\n\t\t// Indexes\n\t\tBasicPerk.#__indexes[\"tagName\"][unit.tagName] = BasicPerk.#__indexes[\"tagName\"][unit.tagName] || [];\n\t\tBasicPerk.#__indexes[\"tagName\"][unit.tagName].push(unit)\n\t\tBasicPerk.#__indexes[\"className\"][c.name] = BasicPerk.#__indexes[\"className\"][c.name] || [];\n\t\tBasicPerk.#__indexes[\"className\"][c.name].push(unit)\n\t\tif (unit.id)\n\t\t{\n\t\t\tBasicPerk.#__indexes[\"id\"][unit.id] = BasicPerk.#__indexes[\"id\"][unit.id] || [];\n\t\t\tBasicPerk.#__indexes[\"id\"][unit.id].push(unit)\n\t\t}\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/main/LICENSE\n */\n// =============================================================================\n\nimport AjaxUtil from \"../util/ajax-util.js\";\nimport ChainableStore from \"../store/chainable-store.js\";\nimport Perk from \"./perk.js\";\nimport URLUtil from \"../util/url-util.js\";\nimport Unit from \"../unit/unit.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tSetting Perk Class\n// =============================================================================\n\nexport default class SettingPerk extends Perk\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__ready;\n\tstatic #__ready_resolve;\n\tstatic #__info = {\n\t\t\"sectionName\":\t\t\"setting\",\n\t\t\"order\":\t\t\t10,\n\t};\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\tstatic get info()\n\t{\n\n\t\treturn SettingPerk.#__info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic get ready()\n\t{\n\n\t\treturn SettingPerk.#__ready;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\tstatic globalInit()\n\t{\n\n\t\t// Init Vars\n\t\tSettingPerk.#__ready = new Promise((resolve, reject) => {\n\t\t\tSettingPerk.#__ready_resolve = resolve;\n\t\t});\n\n\t\t// Upgrade Unit\n\t\tUnit.upgrade(\"asset\", \"setting\", new ChainableStore());\n\t\tUnit.upgrade(\"skill\", \"setting.get\", SettingPerk.#_getSettings);\n\t\tUnit.upgrade(\"skill\", \"setting.set\", SettingPerk.#_setSettings);\n\t\tUnit.upgrade(\"skill\", \"setting.merge\", SettingPerk.#_mergeSettings);\n\t\tUnit.upgrade(\"spell\", \"setting.summon\", SettingPerk.#_loadSettings);\n\t\tUnit.upgrade(\"spell\", \"setting.apply\", SettingPerk.#_applySettings);\n\n\t\treturn Perk.getPerk(\"BasicPerk\").ready.then(() => {\n\t\t\tif (SettingPerk.#__ready_resolve)\n\t\t\t{\n\t\t\t\tSettingPerk.#__ready_resolve();\n\t\t\t\tSettingPerk.#__ready_resolve = null;\n\t\t\t}\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic async init(unit, options)\n\t{\n\n\t\t// Get settings\n\t\tlet settings = (options && options[\"settings\"]) || {};\n\t\tsettings = SettingPerk.#__injectSettings(unit, settings);\n\t\tsettings = SettingPerk.#__mergeSettings(unit, settings);\n\n\t\tawait SettingPerk.ready;\n\n\t\t// Upgrade unit\n\t\tunit.upgrade(\"asset\", \"setting\", new ChainableStore({\"items\":settings, \"chain\":Unit.assets[\"setting\"]}));\n\n\t\tSettingPerk.#__loadAttrSettings(unit);\n\t\tif (SettingPerk.#__hasExternalSettings(unit))\n\t\t{\n\t\t\tawait SettingPerk.#_loadSettings(unit);\n\t\t}\n\t\tSettingPerk.#__loadAttrSettings(unit); // Do it again to overwrite since attribute settings have higher priority\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Skills (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get settings.\n\t *\n     * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey.\n\t * @param\t{*}\t\t\t\tdefaultValue\t\tValue returned when key is not found.\n\t */\n\tstatic #_getSettings(unit, key, defaultValue)\n\t{\n\n\t\treturn unit.get(\"setting\", key, defaultValue);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Set settings.\n\t *\n     * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey.\n\t * @param\t{*}\t\t\t\tvalue\t\t\t\tValue.\n\t */\n\tstatic #_setSettings(unit, key, value)\n\t{\n\n\t\treturn unit.set(\"setting\", key, value);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Set settings.\n\t *\n     * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tkey\t\t\t\t\tKey.\n\t * @param\t{*}\t\t\t\tvalue\t\t\t\tValue.\n\t */\n\tstatic #_mergeSettings(unit, key, value)\n\t{\n\n\t\tunit.assets[\"setting\"].merge(key, value);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Spells (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Apply settings.\n\t *\n     * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t */\n\tstatic async #_applySettings(unit, options)\n\t{\n\n\t\tawait unit.cast(\"event.trigger\", \"beforeApplySettings\", options);\n\t\tawait unit.cast(\"perk.attachPerks\", options);\n\t\tawait unit.cast(\"event.trigger\", \"doApplySettings\", options);\n\t\tawait unit.cast(\"event.trigger\", \"afterApplySettings\", options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load the settings file and merge to unit's settings.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad options.\n\t *\n\t * @return \t{Promise}\t\tPromise.\n\t */\n\tstatic async #_loadSettings(unit, options)\n\t{\n\n\t\tlet settings = await AjaxUtil.loadJSON(SettingPerk.#__getSettingsURL(unit), Object.assign({\"bindTo\":unit}, options));\n\t\tif (settings)\n\t\t{\n\t\t\tunit.use(\"setting.merge\", settings);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get settings from element's attribute.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t */\n\tstatic #__loadAttrSettings(unit)\n\t{\n\n\t\tif (unit.hasAttribute(\"bm-settingsref\"))\n\t\t{\n\t\t\tlet settingsRef = unit.getAttribute(\"bm-settingsref\") || true;\n\t\t\tif (settingsRef === \"false\")\n\t\t\t{\n\t\t\t\tsettingsRef = false;\n\t\t\t}\n\t\t\tunit.set(\"setting\", \"setting.options.settingsRef\", settingsRef);\n\t\t}\n\n\t\tif (unit.hasAttribute(\"bm-options\"))\n\t\t{\n\t\t\tlet options = {\"options\": JSON.parse(unit.getAttribute(\"bm-options\"))};\n\t\t\tunit.use(\"setting.merge\", options);\n\t\t}\n\n\t\t// Path\n\t\tif (unit.hasAttribute(\"bm-path\"))\n\t\t{\n\t\t\tunit.set(\"setting\", \"setting.options.path\", unit.getAttribute(\"bm-path\"));\n\t\t}\n\n\t\t// File name\n\t\tif (unit.hasAttribute(\"bm-filename\"))\n\t\t{\n\t\t\tunit.set(\"setting\", \"setting.options.fileName\", unit.getAttribute(\"bm-filename\"));\n\t\t}\n\n\t\t// Auto loading\n\t\tif (unit.hasAttribute(\"bm-autoload\"))\n\t\t{\n\t\t\tlet autoLoad = unit.getAttribute(\"bm-autoload\");\n\t\t\tif (autoLoad)\n\t\t\t{\n\t\t\t\tlet url = URLUtil.parseURL(autoLoad);\n\t\t\t\tunit.set(\"setting\", \"setting.options.path\", url.path);\n\t\t\t\tunit.set(\"setting\", \"setting.options.fileName\", url.filenameWithoutExtension);\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if the unit has the external settings file.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t *\n\t * @return  {Boolean}\t\tTrue if the unit has the external settings file.\n\t */\n\tstatic #__hasExternalSettings(unit)\n\t{\n\n\t\tlet ret = false;\n\n\t\tif (unit.get(\"setting\", \"setting.options.settingsRef\", unit.get(\"setting\", \"system.setting.options.settingsRef\")))\n\t\t{\n\t\t\tret = true;\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Return URL to setting file.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t *\n\t * @return  {String}\t\tURL.\n\t */\n\tstatic #__getSettingsURL(unit)\n\t{\n\n\t\tlet url;\n\t\tlet settingsRef = unit.get(\"setting\", \"setting.options.settingsRef\");\n\n\t\tif (settingsRef && settingsRef !== true)\n\t\t{\n\t\t\t// If URL is specified in ref, use it\n\t\t\turl = settingsRef;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Use default path and filename\n\t\t\tlet path = Util.concatPath([\n\t\t\t\t\tunit.get(\"setting\", \"system.setting.options.path\", unit.get(\"setting\", \"system.unit.options.path\", \"\")),\n\t\t\t\t\tunit.get(\"setting\", \"setting.options.path\", unit.get(\"setting\", \"unit.options.path\", \"\")),\n\t\t\t\t]);\n\t\t\tlet ext = unit.get(\"setting\", \"setting.options.settingFormat\",\n\t\t\t\t\t\tunit.get(\"setting\", \"system.setting.options.settingFormat\", \"json\"));\n\t\t\tlet fileName = unit.get(\"setting\", \"setting.options.fileName\",\n\t\t\t\t\t\t\tunit.get(\"setting\", \"unit.options.fileName\",\n\t\t\t\t\t\t\t\tunit.tagName.toLowerCase())) + \".settings.\" + ext;\n\t\t\tlet query = unit.get(\"setting\", \"unit.options.query\");\n\n\t\t\turl = Util.concatPath([path, fileName]) + (query ? `?${query}` : \"\");\n\t\t}\n\n\t\treturn url;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Inject settings.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\tsettings\t\t\tSettings.\n\t *\n\t * @return  {Object}\t\tNew settings.\n\t */\n\tstatic #__injectSettings(unit, settings)\n\t{\n\n\t\tif (typeof(unit._injectSettings) === \"function\")\n\t\t{\n\t\t\tsettings = unit._injectSettings.call(unit, settings);\n\t\t}\n\n\t\treturn settings;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n \t * Inject settings.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Object}\t\tsettings\t\t\tSettings.\n\t *\n\t * @return  {Object}\t\tNew settings.\n\t */\n\tstatic #__mergeSettings(unit, settings)\n\t{\n\n\t\tlet curUnit = Object.getPrototypeOf(unit);\n\t\tlet curSettings = {};\n\t\tlet parentSettings;\n\n\t\t// Merge superclass settings\n\t\twhile (typeof(Object.getPrototypeOf(curUnit)._getSettings) === \"function\")\n\t\t{\n\t\t\tparentSettings = Object.getPrototypeOf(curUnit)._getSettings.call(unit);\n\t\t\tif (Object.keys(parentSettings).length > 0)\n\t\t\t{\n\t\t\t\tUtil.deepMerge(parentSettings, curSettings);\n\t\t\t\tcurSettings = parentSettings;\n\t\t\t}\n\n\t\t\tcurUnit= Object.getPrototypeOf(curUnit);\n\t\t}\n\t\tUtil.deepMerge(settings, curSettings);\n\n\t\t// Merge unit settings\n\t\tif (typeof(unit._getSettings) === \"function\")\n\t\t{\n\t\t\tUtil.deepMerge(settings, unit._getSettings.call(unit));\n\t\t}\n\n\t\treturn settings;\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/main/LICENSE\n */\n// =============================================================================\n\nimport Perk from \"./perk.js\";\nimport Store from \"../store/store.js\";\nimport Unit from \"../unit/unit.js\";\nimport Util from \"../util/util.js\";\nimport {v4 as uuidv4} from \"uuid\";\n\n// =============================================================================\n//\tStatus Perk Class\n// =============================================================================\n\nexport default class StatusPerk extends Perk\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__statusInfo = {};\n//\tstatic #__suspends = {};\n\tstatic #__waitingList = new Store();\n\tstatic #__info = {\n\t\t\"sectionName\":\t\t\"status\",\n\t\t\"order\":\t\t\t100,\n\t};\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\tstatic get info()\n\t{\n\n\t\treturn StatusPerk.#__info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\tstatic globalInit()\n\t{\n\n\t\t// Init vars\n\t\tStatusPerk.waitFor = function(waitlist, timeout) { return StatusPerk.#_waitFor(Unit, waitlist, timeout); }\n\n\t\t// Upgrade Unit\n\t\tUnit.upgrade(\"skill\", \"status.change\", StatusPerk.#_changeStatus);\n\t\tUnit.upgrade(\"spell\", \"status.wait\", StatusPerk.#_waitFor);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic init(unit, options)\n\t{\n\n\t\t// Upgrade unit;\n\t\tunit.upgrade(\"inventory\", \"status.status\", \"connected\");\n\t\t//unit.upgrade(\"inventory\", \"status.suspends\", {});\n\n\t\t// Add event handlers\n\t\tunit.use(\"event.add\", \"doApplySettings\", {\"handler\":StatusPerk.#StatusPerk_onDoApplySettings, \"order\":StatusPerk.info[\"order\"]});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Suspend all units at the specified status.\n\t *\n\t * @param\t{String}\t\tstatus\t\t\t\tUnit status.\n\t */\n\t/*\n\tstatic globalSuspend(status)\n\t{\n\n\t\tStatusPerk.#__suspends[status] = StatusPerk.#__createSuspendInfo(status);\n\t\tStatusPerk.#__suspends[status].status = \"pending\";\n\n\t}\n\t*/\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Resume all units at the specified status.\n\t *\n\t * @param\t{String}\t\tstatus\t\t\t\tUnit status.\n\t */\n\t/*\n\tstatic globalResume(status)\n\t{\n\n\t\tStatusPerk.#__suspends[status].resolve();\n\t\tStatusPerk.#__suspends[status].status = \"resolved\";\n\n\t}\n\t*/\n\n\t// -------------------------------------------------------------------------\n\t//  Event Handlers (Unit)\n\t// -------------------------------------------------------------------------\n\n\tstatic #StatusPerk_onDoApplySettings(sender, e, ex)\n\t{\n\n\t\tObject.entries(Util.safeGet(e.detail, \"settings.status.waitFor\", {})).forEach(([sectionName, sectionValue]) => {\n\t\t\tStatusPerk.addEventHandler(sectionName, {\"handler\":StatusPerk.#StatusPerk_onDoProcess, \"options\":sectionValue});\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic #StatusPerk_onDoProcess(sender, e, ex)\n\t{\n\n\t\treturn StatusPerk.#_waitFor(this, ex.options);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Skills (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Change unit status and check waiting list.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit to register.\n\t * @param\t{String}\t\tstatus\t\t\t\tUnit status.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic #_changeStatus(unit, status)\n\t{\n\n\t\tUtil.assert(StatusPerk.#__isTransitionable(unit.get(\"inventory\", \"status.status\"), status), () => `StatusPerk.#_changeStatus(): Illegal transition. name=${unit.tagName}, fromStatus=${unit.get(\"inventory\", \"status.status\")}, toStatus=${status}, id=${unit.id}`, Error);\n\n\t\tunit.set(\"inventory\", \"status.status\", status);\n\t\tStatusPerk.#__statusInfo[unit.uniqueId] = {\"status\":status};\n\n\t\tStatusPerk.#__processWaitingList();\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Spells (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Wait for units to become specific statuses.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Array}\t\t\twaitlist\t\t\tUnits to wait.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic #_waitFor(unit, waitlist, options)\n\t{\n\n\t\tlet promise;\n\t\tlet timeout =\n\t\t\t\t(options && options[\"timeout\"]) ||\n\t\t\t\tunit.get(\"setting\", \"status.options.waitForTimeout\", unit.get(\"setting\", \"system.status.options.waitForTimeout\", 10000));\n\t\tlet waiter = ( options && options[\"waiter\"] ? options[\"waiter\"] : unit );\n\t\tlet waitInfo = {\"waiter\":waiter, \"waitlist\":Util.deepClone(waitlist)};\n\n\t\tif (StatusPerk.#__isAllReady(waitInfo))\n\t\t{\n\t\t\tpromise = Promise.resolve();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Create a promise that is resolved when waiting is completed.\n\t\t\tpromise = new Promise((resolve, reject) => {\n\t\t\t\twaitInfo[\"resolve\"] = resolve;\n\t\t\t\twaitInfo[\"reject\"] = reject;\n\t\t\t\twaitInfo[\"timer\"] = setTimeout(() => {\n\t\t\t\t\tlet name = ( unit && unit.tagName ) || ( waitInfo[\"waiter\"] && waitInfo[\"waiter\"].tagName ) || \"\";\n\t\t\t\t\tlet uniqueId = (unit && unit.uniqueId) || \"\";\n\t\t\t\t\treject(`StatusPerk.#_waitFor(): Timed out after ${timeout} milliseconds waiting for ${StatusPerk.#__dumpWaitlist(waitlist)}, name=${name}, uniqueId=${uniqueId}.`);\n\t\t\t\t}, timeout);\n\t\t\t});\n\t\t\twaitInfo[\"promise\"] = promise;\n\n\t\t\t// Add info to the waiting list.\n\t\t\tStatusPerk.#__addToWaitingList(waitInfo);\n\t\t}\n\n\t\treturn promise;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Suspend the unit at the specified status.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tstatus\t\t\t\tUnit status.\n\t */\n\t/*\n\tstatic #_suspend(unit, status)\n\t{\n\n\t\tunit.#_suspends[status] = StatusPerk.#__createSuspendInfo();\n\t \tunit.#_suspends[status].status = \"pending\";\n\n\t}\n\t*/\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Resume the unit at the specified status.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tstatus\t\t\t\tUnit status.\n\t */\n\t/*\n\tstatic #_resume(unit, status)\n\t{\n\n\t \tunit.#_suspends[status].resolve();\n\t \tunit.#_suspends[status].status = \"resolved\";\n\n\t}\n\t*/\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Pause the unit if it is suspended.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tstatus\t\t\t\tUnit status.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\t/*\n\tstatic #_pause(unit, status)\n\t{\n\n\t\tlet ret = [];\n\n\t\t// Globally suspended?\n\t\tif (StatusPerk.#__suspends[status] && StatusPerk.#__suspends[status].status === \"pending\" && !unit.get(\"setting\", \"setting.ignoreGlobalSuspend\"))\n\t\t{\n\t\t\tret.push(StatusPerk.#__suspends[status].promise);\n\t\t}\n\n\t\t// Unit suspended?\n\t\tif (unit.#_suspends[status] && unit.#_suspends[status].status === \"pending\")\n\t\t{\n\t\t\tret.push(unit.#_suspends[status].promise);\n\t\t}\n\n\t\treturn Promise.all(ret);\n\n\t}\n\t*/\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Process waiting list.\n\t */\n\tstatic #__processWaitingList()\n\t{\n\n\t\tlet removeList = [];\n\t\tObject.keys(StatusPerk.#__waitingList.items).forEach((id) => {\n\t\t\tif (StatusPerk.#__isAllReady(StatusPerk.#__waitingList.get(id)))\n\t\t\t{\n\t\t\t\tclearTimeout(StatusPerk.#__waitingList.get(id)[\"timer\"]);\n\t\t\t\tStatusPerk.#__waitingList.get(id).resolve();\n\t\t\t\tremoveList.push(id);\n\t\t\t}\n\t\t});\n\n\t\t// Remove from waiting list\n\t\tfor (let i = 0; i < removeList.length; i++)\n\t\t{\n\t\t\tStatusPerk.#__waitingList.remove(removeList[i]);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Add wait info to the waiting list.\n\t *\n\t * @param\t{Object}\t\twaitInfo\t\t\tWait info.\n\t */\n\tstatic #__addToWaitingList(waitInfo)\n\t{\n\n\t\tlet id = uuidv4();\n\n\t\t/*\n\t\tfor (let i = 0; i < waitInfo[\"waitlist\"].length; i++)\n\t\t{\n\t\t\t// Check if the node exists\n\t\t\tif (waitInfo[\"waitlist\"][i].rootNode)\n\t\t\t{\n\t\t\t\tlet element = document.querySelector(waitInfo[\"waitlist\"][i].rootNode);\n\n\t\t\t\tUtil.assert(element && element.uniqueId, () => `StatusPerk.#__addToWaitingList(): Root node does not exist. waiter=${waitInfo[\"waiter\"]}, rootNode=${waitInfo[\"waitlist\"][i].rootNode}`, ReferenceError);\n\t\t\t}\n\t\t}\n\t\t*/\n\n\t\tStatusPerk.#__waitingList.set(id, waitInfo);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check whether changing current status to new status is allowed.\n\t *\n\t * @param\t{String}\t\tcurrentStatus\t\tCurrent status.\n\t * @param\t{String}\t\tnewStatus\t\t\tNew status.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic #__isTransitionable(currentStatus, newStatus)\n\t{\n\n\t\tlet ret = true;\n\n\t\tif (currentStatus && currentStatus.slice(-3) === \"ing\")\n\t\t{\n\t\t\tif(\n\t\t\t\t( currentStatus === \"stopping\" && newStatus !== \"stopped\") ||\n\t\t\t\t( currentStatus === \"starting\" && newStatus !== \"started\")\n\t\t\t)\n\t\t\t{\n\t\t\t\tret = false;\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get unit info from wait list item.\n\t *\n\t * @param\t{Object}\t\twaitlistItem\t\tWait list item.\n\t *\n\t * @return  {Boolean}\t\tTrue if ready.\n\t */\n\tstatic #__getStatusInfo(unit, waitlistItem)\n\t{\n\n\t\tlet statusInfo;\n\t\tlet target = unit.use(\"basic.locate\", waitlistItem);\n\t\tif (target)\n\t\t{\n\t\t\tstatusInfo = StatusPerk.#__statusInfo[target.uniqueId];\n\t\t}\n\n\t\treturn statusInfo;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if all units are ready.\n\t *\n\t * @param\t{Object}\t\twaitInfo\t\t\tWait info.\n\t *\n\t * @return  {Boolean}\t\tTrue if ready.\n\t */\n\tstatic #__isAllReady(waitInfo)\n\t{\n\n\t\tlet result = true;\n\t\tlet waitlist = waitInfo[\"waitlist\"];\n\n\t\tfor (let i = 0; i < waitlist.length; i++)\n\t\t{\n\t\t\tlet match = false;\n\t\t\tlet statusInfo = StatusPerk.#__getStatusInfo(waitInfo[\"waiter\"], waitlist[i]);\n\t\t\tif (statusInfo)\n\t\t\t{\n\t\t\t\tif (StatusPerk.#__isStatusMatch(statusInfo[\"status\"], waitlist[i][\"status\"]))\n\t\t\t\t{\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If one fails all fail\n\t\t\tif (!match)\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if status match.\n\t *\n\t * @param\t{String}\t\tcurrentStatus\t\tCurrent status.\n\t * @param\t{String}\t\texpectedStatus\t\tExpected status.\n\t *\n\t * @return  {Boolean}\t\tTrue if match.\n\t */\n\tstatic #__isStatusMatch(currentStatus, expectedStatus)\n\t{\n\n\t\texpectedStatus = expectedStatus || \"ready\";\n\t\tlet isMatch = false;\n\n\t\tswitch (currentStatus)\n\t\t{\n\t\t\tcase \"ready\":\n\t\t\t\tif (\n\t\t\t\t\texpectedStatus === \"ready\" ||\n\t\t\t\t\texpectedStatus === \"started\" ||\n\t\t\t\t\texpectedStatus === \"starting\"\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tisMatch = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"started\":\n\t\t\t\tif (\n\t\t\t\t\texpectedStatus === \"started\" ||\n\t\t\t\t\texpectedStatus === \"starting\"\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tisMatch = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"stopped\":\n\t\t\t\tif (\n\t\t\t\t\texpectedStatus === \"stopped\" ||\n\t\t\t\t\texpectedStatus === \"stopping\"\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tisMatch = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif ( currentStatus === expectedStatus )\n\t\t\t\t{\n\t\t\t\t\tisMatch = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn isMatch;\n\n\t}\n\n\t// -----------------------------------------------------------------------------\n\n\t/**\n\t * Dump wait list as string.\n\t *\n\t * @param\t{Array}\t\t\tWait list.\n\t *\n\t * @return  {String}\t\tWait list string.\n\t */\n\tstatic #__dumpWaitlist(waitlist)\n\t{\n\n\t\tlet result = \"\";\n\n\t\tfor (let i = 0; i < waitlist.length; i++)\n\t\t{\n\t\t\tif (typeof(waitlist[i]) === \"string\")\n\t\t\t{\n\t\t\t\tresult += `\\n\\t{\"${waitlist[i]}\", status:ready},`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet uniqueId = `uniqueId:${waitlist[i].uniqueId}, `;\n\t\t\t\tlet id = (waitlist[i].id ? `id:${waitlist[i].id}, ` : \"\");\n\t\t\t\tlet tagName = (waitlist[i].tagName ? `tagName:${waitlist[i].tagName}, ` : \"\");\n\t\t\t\tlet object = (waitlist[i].object ? `object:${waitlist[i].object.tagName}, ` : \"\");\n\t\t\t\tlet selector = (waitlist[i].selector ? `selector:${waitlist[i].selector}, ` : \"\");\n\t\t\t\tlet status = (waitlist[i].status ? `status:${waitlist[i].status}` : \"status:ready\");\n\t\t\t\tresult += `\\n\\t{${uniqueId}${id}${tagName}${object}${selector}${status}},`;\n\t\t\t}\n\t\t}\n\n\t\treturn `[${result}\\n]`;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Create the suspend info object.\n\t *\n\t * @return  {Object}\t\tSuspend info.\n\t */\n\tstatic #__createSuspendInfo()\n\t{\n\n\t\tlet suspendInfo = {};\n\n\t\tlet promise = new Promise((resolve, reject) => {\n\t\t\tsuspendInfo[\"resolve\"] = resolve;\n\t\t\tsuspendInfo[\"reject\"] = reject;\n\t\t\tsuspendInfo[\"status\"] = \"pending\";\n\t\t});\n\t\tsuspendInfo[\"promise\"] = promise;\n\n\t\treturn suspendInfo;\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/main/LICENSE\n */\n// =============================================================================\n\nimport AjaxUtil from \"../util/ajax-util.js\";\nimport ChainableStore from \"../store/chainable-store.js\";\nimport Perk from \"./perk.js\";\nimport URLUtil from \"../util/url-util.js\";\nimport Unit from \"../unit/unit.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tSkin Perk Class\n// =============================================================================\n\nexport default class SkinPerk extends Perk\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__info = {\n\t\t\"sectionName\":\t\t\"skin\",\n\t\t\"order\":\t\t\t210,\n\t};\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\tstatic get info()\n\t{\n\n\t\treturn SkinPerk.#__info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\tstatic globalInit()\n\t{\n\n\t\tUnit.upgrade(\"skill\", \"skin.apply\", SkinPerk.#_applySkin);\n\t\tUnit.upgrade(\"spell\", \"skin.summon\", SkinPerk.#_loadSkin);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic init(unit, options)\n\t{\n\n\t\t// Upgrade unit\n\t\tunit.upgrade(\"inventory\", \"skin.skins\", {});\n\t\tunit.upgrade(\"inventory\", \"skin.active.skinName\", \"\");\n\n\t\t// Add event handlers\n\t\tunit.use(\"event.add\", \"beforeTransform\", {\"handler\":SkinPerk.#SkinPerk_onBeforeTransform, \"order\":SkinPerk.info[\"order\"]});\n\t\tunit.use(\"event.add\", \"doTransform\", {\"handler\":SkinPerk.#SkinPerk_onDoTransform, \"order\":SkinPerk.info[\"order\"]});\n\n\t\tSkinPerk.#__loadAttrSettings(unit);\n\t\tSkinPerk.#__adjustSettings(unit);\n\n\t\t// Shadow DOM\n\t\tlet shadowRoot;\n\t\tswitch (unit.get(\"setting\", \"skin.options.shadowDOM\", unit.get(\"setting\" ,\"system.skin.options.shadowDOM\")))\n\t\t{\n\t\tcase \"open\":\n\t\t\tshadowRoot = unit.attachShadow({mode:\"open\"});\n\t\t\tunit.set(\"inventory\", \"skin.shadowRoot\", shadowRoot);\n\t\t\tunit.set(\"inventory\", \"basic.unitRoot\", shadowRoot);\n\t\t\tbreak;\n\t\tcase \"closed\":\n\t\t\tshadowRoot = unit.attachShadow({mode:\"closed\"});\n\t\t\tunit.set(\"inventory\", \"skin.shadowRoot\", shadowRoot);\n\t\t\tunit.set(\"inventory\", \"basic.unitRoot\", shadowRoot);\n\t\t\tbreak;\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Event Handlers (Unit)\n\t// -------------------------------------------------------------------------\n\n\tstatic async #SkinPerk_onBeforeTransform(sender, e, ex)\n\t{\n\n\t\tif (this.get(\"setting\", \"skin.options.hasSkin\", true))\n\t\t{\n\t\t\tlet skinInfo = await SkinPerk.#_loadSkin(this, e.detail.skinName, e.detail.skinOptions);\n\t\t\tthis.get(\"inventory\", \"basic.unitRoot\").textContent = \"\";\n\t\t\tthis.set(\"inventory\", \"basic.unitRoot\", skinInfo[\"template\"].content.cloneNode(true));\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic #SkinPerk_onDoTransform(sender, e, ex)\n\t{\n\n\t\tif (this.get(\"setting\", \"skin.options.hasSkin\", true))\n\t\t{\n\t\t\treturn SkinPerk.#_applySkin(this, e.detail.skinName, this.get(\"inventory\", \"basic.unitRoot\"));\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Skills (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Apply skin.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tParent unit.\n\t * @param\t{String}\t\tskinName\t\t\tSkin name.\n\t * @param\t{Node}\t\t\tclone\t\t\t\tTemplate node.\n\t */\n\tstatic #_applySkin(unit, skinName, clone)\n\t{\n\n\t\tlet skinInfo = unit.get(\"inventory\", `skin.skins.${skinName}`);\n\n\t\tUtil.assert(skinInfo,() => `SkinPerk.#_applySkin(): Skin not loaded. name=${unit.tagName}, skinName=${skinName}, id=${unit.id}, uniqueId=${unit.uniqueId}`, ReferenceError);\n\n\t\t// Append the clone to the unit\n\t\tclone = clone || this.get(\"inventory\", \"basic.unitRoot\");\n\t\tunit.set(\"inventory\", \"basic.unitRoot\", unit.get(\"inventory\", \"skin.shadowRoot\", unit));\n\t\tunit.get(\"inventory\", \"basic.unitRoot\").innerHTML = \"\";\n\t\tunit.get(\"inventory\", \"basic.unitRoot\").appendChild(clone);\n\n\t\t// Change active skin\n\t\tunit.set(\"inventory\", \"skin.active.skinName\", skinName);\n\n\t\tconsole.debug(`SkinPerk.#_applySkin(): Applied skin. name=${unit.tagName}, skinName=${skinName}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Spells (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load the skin HTML.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tskinName\t\t\tSkin name.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad options.\n\t *\n\t * @return \t{Promise}\t\tPromise.\n\t */\n\tstatic #_loadSkin(unit, skinName, options)\n\t{\n\n\t\tlet promise = Promise.resolve();\n\t\tlet skinInfo = unit.get(\"inventory\", `skin.skins.${skinName}`) || SkinPerk.#__createSkinInfo(unit, skinName);\n\t\tlet skinSettings = options || unit.get(\"setting\", `skin.skins.${skinName}`, {});\n\n\t\tif (skinInfo[\"status\"] === \"loaded\")\n\t\t{\n\t\t\tconsole.debug(`SkinPerk.#_loadSkin(): Skin already loaded. name=${unit.tagName}, skinName=${skinName}`);\n\t\t\treturn Promise.resolve(skinInfo);\n\t\t}\n\n\t\tswitch (skinSettings[\"type\"]) {\n\t\tcase \"HTML\":\n\t\t\tskinInfo[\"HTML\"] = skinSettings[\"HTML\"];\n\t\t\tbreak;\n\t\tcase \"node\":\n\t\t\tlet rootNode = unit.use(\"basic.scan\", skinSettings[\"selector\"] || \"\");\n\t\t\tUtil.assert(rootNode, () => `SkinPerk.#_loadSkin(): Node does not exist. name=${unit.tagName}, skinName=${skinName}, selector=${skinSettings[\"selector\"]}`);\n\t\t\tskinInfo[\"HTML\"] = rootNode.innerHTML;\n\t\t\tbreak;\n\t\tcase \"URL\":\n\t\tdefault:\n\t\t\tlet url = skinSettings[\"URL\"] || SkinPerk.#__getDefaultURL(unit, skinName, skinSettings);\n\t\t\tUtil.assert(url, () => `SkinPerk.#_loadSkin(): Skin URL is not speicified. name=${unit.tagName}, skinName=${skinName}`);\n\t\t\tpromise = AjaxUtil.loadHTML(url).then((skin) => {\n\t\t\t\tskinInfo[\"HTML\"] = skin;\n\t\t\t});\n\t\t\tskinInfo[\"promise\"] = promise;\n\t\t\tskinInfo[\"status\"] = \"loading\";\n\t\t\tbreak;\n\t\tcase \"inline\":\n\t\t//default:\n\t\t\tpromise = new Promise((resolve, reject) => {\n\t\t\t\t// Need to set timeout to wait for innerHTML to be ready\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tskinInfo[\"HTML\"] = (unit.firstElementChild && unit.firstElementChild.tagName === \"TEMPLATE\" ? unit.firstElementChild.innerHTML : unit.innerHTML);\n\t\t\t\t\tunit.innerHTML = \"\";\n\t\t\t\t\tresolve();\n\t\t\t\t}, 1);\n\t\t\t});\n\t\t\tskinInfo[\"promise\"] = promise;\n\t\t\tskinInfo[\"status\"] = \"loading\";\n\t\t\tbreak;\n\t\t}\n\n\t\treturn promise.then(() => {\n\t\t\tskinInfo[\"template\"] = document.createElement(\"template\");\n\t\t\tskinInfo[\"template\"].innerHTML = skinInfo[\"HTML\"];\n\t\t\tskinInfo[\"status\"] = \"loaded\";\n\n\t\t\treturn skinInfo;\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get settings from element's attribute.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t */\n\tstatic #__loadAttrSettings(unit)\n\t{\n\n\t\tif (unit.hasAttribute(\"bm-skinref\"))\n\t\t{\n\t\t\tlet skinRef = unit.getAttribute(\"bm-skinref\") || true;\n\t\t\tif (skinRef === \"false\")\n\t\t\t{\n\t\t\t\tskinRef = false;\n\t\t\t}\n\n\t\t\tunit.set(\"setting\", \"skin.options.skinRef\", skinRef);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Adjust unit settings.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t */\n\tstatic #__adjustSettings(unit)\n\t{\n\n\t\tlet url = unit.get(\"setting\", \"skin.options.skinRef\");\n\t\tif (url === false)\n\t\t{\n\t\t\tunit.set(\"setting\", `skin.options.hasSkin`, false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet skinSettings = unit.get(\"setting\", \"skin.skins.default\", {});\n\t\t\tskinSettings[\"type\"] = skinSettings[\"type\"] || \"URL\";\n\t\t\tskinSettings[\"URL\"] = skinSettings[\"URL\"] || ( typeof(url) === \"string\" ? url : \"\" );\n\t\t\tunit.set(\"setting\", `skin.skins.default`, skinSettings);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Returns a new skin info object.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tParent unit.\n\t * @param\t{String}\t\tskinName\t\t\tSkin name.\n\t *\n\t * @return  {Object}\t\tSkin info.\n\t */\n\tstatic #__createSkinInfo(unit, skinName)\n\t{\n\n\t\tlet info = {\n\t\t\t\"name\":\t\tskinName,\n\t\t\t\"HTML\":\t\t\"\",\n\t\t\t\"template\": null,\n\t\t\t\"status\":\t\"\",\n\t\t};\n\n\t\tunit.set(\"inventory\", `skin.skins.${skinName}`, info);\n\n\t\treturn info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Return default URL to the skin file.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tskinName\t\t\tSkin name.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {String}\t\tURL.\n\t */\n\tstatic #__getDefaultURL(unit, skinName, options)\n\t{\n\n\t\tlet url;\n\t\tlet skinRef = unit.get(\"setting\", \"skin.options.skinRef\");\n\n\t\tif (skinRef && skinRef !== true)\n\t\t{\n\t\t\t// If URL is specified in ref, use it\n\t\t\turl = skinRef;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Use default path and filename\n\t\t\tlet path = Util.concatPath([\n\t\t\t\t\tunit.get(\"setting\", \"system.skin.options.path\",\n\t\t\t\t\t\tunit.get(\"setting\", \"system.unit.options.path\", \"\")),\n\t\t\t\t\tUtil.safeGet(options, \"path\",\n\t\t\t\t\t\tunit.get(\"setting\", \"skin.options.path\",\n\t\t\t\t\t\t\tunit.get(\"setting\", \"unit.options.path\", \"\"))),\n\t\t\t\t]);\n\t\t\tlet fileName = SkinPerk.#__getDefaultFilename(unit, skinName, options) + \".html\";\n\t\t\tlet query = unit.get(\"setting\", \"unit.options.query\");\n\n\t\t\turl = Util.concatPath([path, fileName]) + (query ? `?${query}` : \"\");\n\t\t}\n\n\t\treturn url;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get the default skin name.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tskinName\t\t\tSkin name.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return \t{String}\t\tSkin name.\n\t */\n\tstatic #__getDefaultFilename(unit, skinName, options)\n\t{\n\n\t\treturn\tUtil.safeGet(options, \"fileName\",\n\t\t\t\t\tunit.get(\"setting\", \"skin.options.fileName\",\n\t\t\t\t\t\tunit.get(\"setting\", \"unit.options.fileName\",\n\t\t\t\t\t\t\tunit.tagName.toLowerCase())));\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/main/LICENSE\n */\n// =============================================================================\n\nimport AjaxUtil from \"../util/ajax-util.js\";\nimport ChainableStore from \"../store/chainable-store.js\";\nimport Perk from \"./perk.js\";\nimport Unit from \"../unit/unit.js\";\nimport URLUtil from \"../util/url-util.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tStyle Perk Class\n// =============================================================================\n\nexport default class StylePerk extends Perk\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__ready;\n\tstatic #__ready_resolve;\n\tstatic #__vault = new WeakMap();\n\tstatic #__applied = {};\n\tstatic #__info = {\n\t\t\"sectionName\":\t\t\"style\",\n\t\t\"order\":\t\t\t200,\n\t};\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\tstatic get info()\n\t{\n\n\t\treturn StylePerk.#__info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic get ready()\n\t{\n\n\t\treturn StylePerk.#__ready;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\tstatic async globalInit()\n\t{\n\n\t\t// Init Vars\n\t\tStylePerk.#__ready = new Promise((resolve, reject) => {\n\t\t\tStylePerk.#__ready_resolve = resolve;\n\t\t});\n\t\tStylePerk.#__vault.set(Unit, {\"applied\": []});\n\n\t\t// Upgrade Unit\n\t\tUnit.upgrade(\"inventory\", \"style.styles\", new ChainableStore());\n\t\tUnit.upgrade(\"spell\", \"style.summon\", StylePerk.#_loadCSS);\n\t\tUnit.upgrade(\"spell\", \"style.apply\", StylePerk.#_applyCSS);\n\n\t\tawait Perk.getPerk(\"SettingPerk\").ready;\n\n\t\t// Load and apply common CSS\n\t\tlet promises = [];\n\t\tObject.entries(Unit.get(\"setting\", \"system.style.styles\", {})).forEach(([sectionName, sectionValue]) => {\n\t\t\tpromises.push(StylePerk.#_loadCSS(Unit, sectionName, sectionValue, true));\n\t\t});\n\n\t\tawait Promise.all(promises);\n\t\tawait Perk.getPerk(\"BasicPerk\").ready; // === documentReady\n\t\tawait StylePerk.#__applyAllCSS(Unit, Unit.get(\"setting\", \"system.style.options.apply\", []));\n\n\t\t// Ready\n\t\tStylePerk.#__ready_resolve();\n\t\tStylePerk.#__ready_resolve = null;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic init(unit, options)\n\t{\n\n\t\t// Upgrade unit\n\t\tStylePerk.#__vault.set(unit, {\"applied\": []});\n\t\tunit.upgrade(\"inventory\", \"style.styles\", new ChainableStore({\n\t\t\t\"chain\":\tUnit.get(\"inventory\", \"style.styles\"),\n\t\t}));\n\n\t\t// Add event handlers\n\t\tunit.use(\"event.add\", \"beforeTransform\", {\"handler\":StylePerk.#StylePerk_onBeforeTransform, \"order\":StylePerk.info[\"order\"]});\n\t\tunit.use(\"event.add\", \"doTransform\", {\"handler\":StylePerk.#StylePerk_onDoTransform, \"order\":StylePerk.info[\"order\"]});\n\n\t\tStylePerk.#__loadAttrSettings(unit);\n\t\tStylePerk.#__adjustSettings(unit);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Event Handlers (Unit)\n\t// -------------------------------------------------------------------------\n\n\tstatic async #StylePerk_onBeforeTransform(sender, e, ex)\n\t{\n\n\t\t// Wait global CSS to be applied\n\t\tawait StylePerk.ready;\n\n\t\t// Clear CSS\n\t\tStylePerk.#_clearCSS(this);\n\n\t\t// Load common CSS\n\t\tlet promises = [];\n\t\tlet css = this.get(\"setting\", \"style.options.apply\", []);\n\t\tfor (let i = 0; i < css.length; i++)\n\t\t{\n\t\t\tpromises.push(StylePerk.#_loadCSS(this, css[i]));\n\t\t}\n\n\t\t// Apply common CSS\n\t\tawait Promise.all(promises);\n\t\tawait StylePerk.#__applyAllCSS(this,css);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic async #StylePerk_onDoTransform(sender, e, ex)\n\t{\n\n\t\tif (this.get(\"setting\", \"style.options.hasStyle\", true))\n\t\t{\n\t\t\t// Load unit-specific CSS\n\t\t\tlet promises = [];\n\t\t\tlet css = this.get(\"setting\", `style.styles.${e.detail.styleName}.apply`, []);\n\t\t\tcss.push(e.detail.styleName);\n\t\t\tfor (let i = 0; i < css.length; i++)\n\t\t\t{\n\t\t\t\tpromises.push(StylePerk.#_loadCSS(this, css[i]));\n\t\t\t}\n\n\t\t\t// Apply unit-specific CSS\n\t\t\tawait Promise.all(promises);\n\t\t\tawait StylePerk.#__applyAllCSS(this, css);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Spells (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load the CSS.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tstyleName\t\t\tStyle name.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad options.\n\t *\n\t * @return \t{Promise}\t\tPromise.\n\t */\n\tstatic #_loadCSS(unit, styleName, options, shared)\n\t{\n\n\t\tlet promise = Promise.resolve();\n\t\tlet styleInfo = unit.get(\"inventory\", \"style.styles\").get(styleName) || StylePerk.#__createStyleInfo(unit, styleName);\n\t\tlet styleSettings = options || unit.get(\"setting\", `style.styles.${styleName}`, {});\n\n\t\tif (styleInfo[\"status\"] === \"loaded\")\n\t\t{\n\t\t\tconsole.debug(`StylePerk.#_loadCSS(): Style already loaded. name=${unit.tagName}, styleName=${styleName}`);\n\t\t\treturn Promise.resolve(styleInfo);\n\t\t}\n\n\t\tUtil.warn(styleName === \"default\" || Object.keys(styleSettings).length > 0, ()=>`Style settings not found. name=${unit.tagName}, styleName=${styleName}`);\n\n\t\tswitch (styleSettings[\"type\"]) {\n\t\tcase \"CSS\":\n\t\t\tstyleInfo[\"CSS\"] = styleSettings[\"CSS\"];\n\t\t\tbreak;\n\t\tcase \"URL\":\n\t\tdefault:\n\t\t\tif (styleInfo[\"status\"] === \"loading\")\n\t\t\t{\n\t\t\t\tpromise = styleInfo[\"promise\"];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet url = styleSettings[\"URL\"] || StylePerk.#__getDefaultURL(unit, styleName, styleSettings);\n\t\t\t\tUtil.assert(url, () => `StylePerk.#_loadCSS(): CSS URL is not speicified. name=${unit.tagName}, styleName=${styleName}`);\n\t\t\t\tpromise = AjaxUtil.loadCSS(url).then((css) => {\n\t\t\t\t\tstyleInfo[\"CSS\"] = css;\n\t\t\t\t});\n\t\t\t\tstyleInfo[\"promise\"] = promise;\n\t\t\t\tstyleInfo[\"status\"] = \"loading\";\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\treturn promise.then(() => {\n\t\t\tstyleInfo[\"status\"] = \"loaded\";\n\t\t\tstyleInfo[\"shared\"] = shared;\n\n\t\t\treturn styleInfo;\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Apply style.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tParent unit.\n\t * @param\t{String}\t\tstyleName\t\t\tStyle name.\n\t */\n\tstatic async #_applyCSS(unit, styleName)\n\t{\n\n\t\tlet cssInfo = unit.get(\"inventory\", \"style.styles\").get(styleName);\n\t\tUtil.assert(cssInfo, () => `StylePerk.#_applyCSS(): CSS not loaded. name=${unit.tagName || \"Global\"}, styleName=${styleName}, id=${unit.id}, uniqueId=${unit.uniqueId}`, ReferenceError);\n\n\t\tlet ss = new CSSStyleSheet();\n\t\tawait ss.replace(`${cssInfo[\"CSS\"]}`);\n\n\t\tlet shadowRoot = unit.get(\"inventory\", \"skin.shadowRoot\");\n\t\tif (shadowRoot)\n\t\t{\n\t\t\t// Shadow DOM\n\t\t\tshadowRoot.adoptedStyleSheets = [...shadowRoot.adoptedStyleSheets, ss];\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Light DOM\n\t\t\tstyleName = (cssInfo[\"shared\"] ? styleName : `${unit.tagName}.${styleName}`);\n\t\t\tif (!(styleName in StylePerk.#__applied) || StylePerk.#__applied[styleName][\"count\"] <= 0)\n\t\t\t{\n\t\t\t\t// Apply styles\n\t\t\t\tStylePerk.#__applied[styleName] = StylePerk.#__applied[styleName] || {};\n\t\t\t\tdocument.adoptedStyleSheets = [...document.adoptedStyleSheets, ss];\n\t\t\t\tStylePerk.#__applied[styleName][\"object\"] = ss;\n\t\t\t\tStylePerk.#__applied[styleName][\"count\"] = 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Already applied\n\t\t\t\tStylePerk.#__applied[styleName][\"count\"]++;\n\t\t\t}\n\n\t\t\tStylePerk.#__vault.get(unit)[\"applied\"].push(styleName);\n\t\t}\n\n\t\tconsole.debug(`StylePerk.#_applyCSS(): Applied CSS. name=${unit.tagName}, styleName=${cssInfo[\"name\"]}, id=${unit.id}, uniqueId=${unit.uniqueId}`);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Clear styles. Works only in ShadowDOM.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tParent unit.\n\t */\n\tstatic #_clearCSS(unit)\n\t{\n\n\t\tlet shadowRoot = unit.get(\"inventory\", \"skin.shadowRoot\");\n\t\tif (shadowRoot)\n\t\t{\n\t\t\t// Shadow DOM\n\t\t\tshadowRoot.adoptedStyleSheets = [];\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Light DOM\n\t\t\tlet applied = StylePerk.#__vault.get(unit)[\"applied\"];\n\t\t\tif (applied.length > 0)\n\t\t\t{\n\t\t\t\tfor (let i = 0; i < applied.length; i++)\n\t\t\t\t{\n\t\t\t\t\tStylePerk.#__applied[applied[i]][\"count\"]--;\n\t\t\t\t}\n\t\t\t\tStylePerk.#__vault.get(unit)[\"applied\"] = [];\n\n\t\t\t\t// Re-apply other CSS\n\t\t\t\tdocument.adoptedStyleSheets = [];\n\t\t\t\tObject.keys(StylePerk.#__applied).forEach((key) => {\n\t\t\t\t\tif (StylePerk.#__applied[key][\"count\"] > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tdocument.adoptedStyleSheets = [...document.adoptedStyleSheets, StylePerk.#__applied[key][\"object\"]];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Apply all CSS.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{Array}\t\t\tcss\t\t\t\t\tArray of CSS names to apply.\n\t */\n\tstatic #__applyAllCSS(unit, css)\n\t{\n\n\t\tlet chain = Promise.resolve();\n\n\t\tfor (let i = 0; i < css.length; i++)\n\t\t{\n\t\t\tchain = chain.then(() => {\n\t\t\t\treturn StylePerk.#_applyCSS(unit, css[i]);\n\t\t\t});\n\t\t}\n\n\t\treturn chain;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get settings from element's attribute.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t */\n\tstatic #__loadAttrSettings(unit)\n\t{\n\n\t\tif (unit.hasAttribute(\"bm-styleref\"))\n\t\t{\n\t\t\tlet styleRef = unit.getAttribute(\"bm-styleref\") || true;\n\t\t\tif (styleRef === \"false\")\n\t\t\t{\n\t\t\t\tstyleRef = false;\n\t\t\t}\n\n\t\t\tunit.set(\"setting\", \"style.options.styleRef\", styleRef);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Adjust unit settings.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t */\n\tstatic #__adjustSettings(unit)\n\t{\n\n\t\tlet url = unit.get(\"setting\", \"style.options.styleRef\");\n\t\tif (url === false)\n\t\t{\n\t\t\tunit.set(\"setting\", \"style.options.hasStyle\", false);\n\t\t}\n\t\telse if (url)\n\t\t{\n\t\t\tlet styleSettings = unit.get(\"setting\", `style.styles.default`, {});\n\t\t\tstyleSettings[\"type\"] = styleSettings[\"type\"] || \"URL\";\n\t\t\tstyleSettings[\"URL\"] = styleSettings[\"URL\"] || ( typeof(url) === \"string\" ? url : \"\" );\n\t\t\tunit.set(\"setting\", `style.styles.default`, styleSettings);\n\t\t\tunit.set(\"setting\", \"style.options.hasStyle\", true);\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Returns a new Style info object.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tParent unit.\n\t * @param\t{String}\t\tstyleName\t\t\tStyle name.\n\t *\n\t * @return  {Object}\t\tStyle info.\n\t */\n\tstatic #__createStyleInfo(unit, styleName)\n\t{\n\n\t\tlet info = {\n\t\t\t\"name\": \tstyleName,\n\t\t\t\"CSS\":\t\t\"\",\n\t\t\t\"status\":\t\"\",\n\t\t}\n\n\t\tunit.get(\"inventory\", `style.styles`).set(styleName, info);\n\n\t\treturn info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Return URL to CSS file.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tstyleName\t\t\tStyle name.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return  {String}\t\tURL.\n\t */\n\tstatic #__getDefaultURL(unit, styleName, options)\n\t{\n\n\t\tlet url;\n\n\t\tlet cssRef = unit.get(\"setting\", \"style.options.styleRef\");\n\t\tif (cssRef && cssRef !== true)\n\t\t{\n\t\t\t// If URL is specified in ref, use it\n\t\t\turl = cssRef;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Use default path and filename\n\t\t\tlet path = Util.concatPath([\n\t\t\t\t\tunit.get(\"setting\", \"system.style.options.path\",\n\t\t\t\t\t\tunit.get(\"setting\", \"system.unit.options.path\", \"\")),\n\t\t\t\t\tUtil.safeGet(options, \"path\",\n\t\t\t\t\t\tunit.get(\"setting\", \"style.options.path\",\n\t\t\t\t\t\t\tunit.get(\"setting\", \"unit.options.path\", \"\"))),\n\t\t\t\t]);\n\t\t\tlet fileName =  StylePerk.#__getDefaultFilename(unit, styleName, options) + \".css\";\n\t\t\tlet query = unit.get(\"setting\", \"unit.options.query\");\n\n\t\t\turl = Util.concatPath([path, fileName]) + (query ? `?${query}` : \"\");\n\t\t}\n\n\t\treturn url;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get the default style name.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\tstyleName\t\t\tStyle name.\n\t * @param\t{Object}\t\toptions\t\t\t\tOptions.\n\t *\n\t * @return \t{String}\t\tStyle name.\n\t */\n\tstatic #__getDefaultFilename(unit, styleName, options)\n\t{\n\n\t\treturn\tUtil.safeGet(options, \"fileName\",\n\t\t\t\t\tunit.get(\"setting\", \"style.options.fileName\",\n\t\t\t\t\t\tunit.get(\"setting\", \"unit.options.fileName\",\n\t\t\t\t\t\t\tunit.tagName.toLowerCase())));\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/main/LICENSE\n */\n// =============================================================================\n\nimport Perk from \"./perk.js\";\nimport Unit from \"../unit/unit.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tEvent Perk class\n// =============================================================================\n\nexport default class EventPerk extends Perk\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__eventInfo = new WeakMap();\n\tstatic #__info = {\n\t\t\"sectionName\":\t\t\"event\",\n\t\t\"order\":\t\t\t210,\n\t};\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\tstatic get info()\n\t{\n\n\t\treturn EventPerk.#__info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\tstatic globalInit(unit, options)\n\t{\n\n\t\tUnit.upgrade(\"skill\", \"event.add\", EventPerk.#_addEventHandler);\n\t\tUnit.upgrade(\"skill\", \"event.remove\", EventPerk.#_removeEventHandler);\n\t\tUnit.upgrade(\"skill\", \"event.init\", EventPerk.#_initEvents);\n\t\tUnit.upgrade(\"skill\", \"event.reset\", EventPerk.#_removeEvents);\n\t\tUnit.upgrade(\"skill\", \"event.triggerSync\", EventPerk.#_triggerSync);\n\t\tUnit.upgrade(\"spell\", \"event.trigger\", EventPerk.#_trigger);\n\n\t}\n\n\tstatic init(unit, options)\n\t{\n\n\t\t// Add event handlers\n\t\tunit.use(\"event.add\", \"doApplySettings\", {\"handler\":EventPerk.#EventPerk_onDoApplySettings, \"order\":EventPerk.info[\"order\"]});\n\t\tunit.use(\"event.add\", \"afterTransform\", {\"handler\":EventPerk.#EventPerk_onAfterTransform, \"order\":EventPerk.info[\"order\"]});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic deinit(unit, options)\n\t{\n\n\t\tlet events = unit.get(\"setting\", \"event\");\n\t\tif (events)\n\t\t{\n\t\t\tObject.keys(events).forEach((elementName) => {\n\t\t\t\tEventPerk.#_removeEvents(unit, elementName, events[eventName]);\n\t\t\t});\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Event Handlers (Unit)\n\t// -------------------------------------------------------------------------\n\n\tstatic #EventPerk_onDoApplySettings(sender, e, ex)\n\t{\n\n\t\tObject.entries(Util.safeGet(e.detail, \"settings.event.events\", {})).forEach(([sectionName, sectionValue]) => {\n\t\t\tEventPerk.#_initEvents(this, sectionName, sectionValue);\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic #EventPerk_onAfterTransform(sender, e, ex)\n\t{\n\n\t\tObject.entries(this.get(\"setting\", \"event.events\", {})).forEach(([sectionName, sectionValue]) => {\n\t\t\t// Initialize only elements inside unit\n\t\t\tif (!EventPerk.#__isTargetSelf(sectionName, sectionValue))\n\t\t\t{\n\t\t\t\tEventPerk.#_initEvents(this, sectionName, sectionValue);\n\t\t\t}\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Skills (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Add an event handler.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\teventName\t\t\tEvent name.\n\t * @param\t{Object/Function/String}\thandlerInfo\tEvent handler info.\n\t * @param\t{HTMLElement}\telement\t\t\t\tHTML element.\n\t * @param\t{Object}\t\tbindTo\t\t\t\tObject that binds to the handler.\n\t */\n\tstatic #_addEventHandler(unit, eventName, handlerInfo, element, bindTo)\n\t{\n\n\t\telement = element || unit;\n\t\tlet handlerOptions = (typeof handlerInfo === \"object\" ? handlerInfo : {});\n\n\t\t// Get handler\n\t\tlet handler = EventPerk.#__getEventHandler(unit, handlerInfo);\n\t\tUtil.assert(handler, () => `EventPerk.#_addEventHandler(): handler not found. name=${unit.tagName}, eventName=${eventName}`);\n\n\t\t// Init event info object for the element\n\t\tif (!EventPerk.#__eventInfo.get(element))\n\t\t{\n\t\t\tEventPerk.#__eventInfo.set(element, {\"unit\":unit, \"listeners\":{}, \"promises\":{}, \"statuses\":{}});\n\t\t}\n\n\t\t// Add hook event handler\n\t\tlet listeners = EventPerk.#__eventInfo.get(element)[\"listeners\"];\n\t\tif (!listeners[eventName])\n\t\t{\n\t\t\tlisteners[eventName] = [];\n\t\t\telement.addEventListener(eventName, EventPerk.#__callEventHandler, handlerOptions[\"listnerOptions\"]);\n\t\t}\n\n\t\tlet order = Util.safeGet(handlerOptions, \"order\", 1000);\n\n\t\t// Register listener info\n\t\tlisteners[eventName].push({\"handler\":handler, \"options\":handlerOptions[\"options\"], \"bindTo\":bindTo, \"order\":order});\n\n\t\t// Stable sort by order\n\t\tlisteners[eventName].sort((a, b) => {\n\t\t\tif (a.order === b.order)\treturn 0;\n\t\t\telse if (a.order > b.order)\treturn 1;\n\t\t\telse \t\t\t\t\t\treturn -1\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Remove an event handler.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\teventName\t\t\tEvent name.\n\t * @param\t{HTMLElement}\telement\t\t\t\tHTML element.\n\t * @param\t{Object/Function/String}\thandlerInfo\tEvent handler info.\n\t */\n\tstatic #_removeEventHandler(unit, eventName, handlerInfo, element)\n\t{\n\n\t\telement = element || unit;\n\n\t\t// Get handler\n\t\tlet handler = EventPerk.#__getEventHandler(unit, handlerInfo);\n\t\tUtil.assert(handler, () => `EventPerk.#_removeEventHandler(): handler not found. name=${unit.tagName}, eventName=${eventName}`);\n\n\t\tlet listeners = Util.safeGet(EventPerk.#__eventInfo.get(element), `.listeners.${eventName}`);\n\t\tif (listeners)\n\t\t{\n\t\t\tfor (let i = listeners.length - 1; i >= 0; i--)\n\t\t\t{\n\t\t\t\tif (listeners[i][\"handler\"] === handler)\n\t\t\t\t{\n\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Set event handlers to the element.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\telementName\t\t\tElement name.\n\t * @param\t{Object}\t\teventInfo\t\t\tEvent info.\n\t * @param\t{HTMLElement}\trootNode\t\t\tRoot node of elements.\n\t */\n\tstatic #_initEvents(unit, elementName, eventInfo, rootNode)\n\t{\n\n\t\teventInfo = ( eventInfo ? eventInfo : unit.get(\"setting\", `event.events.${elementName}`) );\n\n\t\t// Get target elements\n\t\tlet elements = EventPerk.#__getTargetElements(unit, rootNode, elementName, eventInfo);\n\t\t//Util.warn(elements.length > 0, `EventPerk.#_initEvents: No elements for the event found. name=${unit.tagName}, elementName=${elementName}`);\n\n\t\t// Set event handlers\n\t\tObject.keys(eventInfo[\"handlers\"]).forEach((eventName) => {\n\t\t\tlet handlers = ( Array.isArray(eventInfo[\"handlers\"][eventName]) ? eventInfo[\"handlers\"][eventName] : [eventInfo[\"handlers\"][eventName]] );\n\t\t\tfor (let i = 0; i < handlers.length; i++)\n\t\t\t{\n\t\t\t\tfor (let j = 0; j < elements.length; j++)\n\t\t\t\t{\n\t\t\t\t\tEventPerk.#_addEventHandler(unit, eventName, handlers[i], elements[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Remove event handlers from the element.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{String}\t\telementName\t\t\tElement name.\n\t * @param\t{Object}\t\teventInfo\t\t\tEvent info.\n\t * @param\t{HTMLElement}\trootNode\t\t\tRoot node of elements.\n\t */\n\tstatic #_removeEvents(unit, elementName, eventInfo, rootNode)\n\t{\n\n\t\teventInfo = ( eventInfo ? eventInfo : unit.get(\"setting\", `event.events.${elementName}`) );\n\n\t\t// Get target elements\n\t\tlet elements = EventPerk.#__getTargetElements(unit, rootNode, elementName, eventInfo);\n\t\t//Util.warn(elements.length > 0, `EventPerk.#_removeEvents: No elements for the event found. name=${unit.tagName}, elementName=${elementName}`);\n\n\t\t// Remove event handlers\n\t\tObject.keys(eventInfo[\"handlers\"]).forEach((eventName) => {\n\t\t\tlet handlers = ( Array.isArray(eventInfo[\"handlers\"][eventName]) ? eventInfo[\"handlers\"][eventName] : [eventInfo[\"handlers\"][eventName]] );\n\t\t\tfor (let i = 0; i < handlers.length; i++)\n\t\t\t{\n\t\t\t\tfor (let j = 0; j < elements.length; j++)\n\t\t\t\t{\n\t\t\t\t\tunit.removeEventHandler(eventName, handlers[i], elements[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Spells (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Trigger the event synchronously.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\t\tUnit.\n\t * @param\t{String}\t\teventName\t\t\t\tEvent name to trigger.\n\t * @param\t{Object}\t\toptions\t\t\t\t\tEvent parameter options.\n\t * @param\t{HTMLElement}\telement\t\t\t\t\tHTML element.\n\t */\n\tstatic #_trigger(unit, eventName, options, element)\n\t{\n\n\t\toptions = options || {};\n\t\telement = ( element ? element : unit );\n\n\t\telement.dispatchEvent(new CustomEvent(eventName, { detail: options }));\n\n\t\t// return the promise if exists\n\t\treturn Util.safeGet(EventPerk.#__eventInfo.get(element), `promises.${eventName}`) || Promise.resolve();\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Trigger the event synchronously.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\t\tUnit.\n\t * @param\t{String}\t\teventName\t\t\t\tEvent name to trigger.\n\t * @param\t{Object}\t\toptions\t\t\t\t\tEvent parameter options.\n\t * @param\t{HTMLElement}\telement\t\t\t\t\tHTML element.\n\t */\n\tstatic #_triggerSync(unit, eventName, options, element)\n\t{\n\n\t\toptions = options || {};\n\t\toptions[\"async\"] = true;\n\n\t\treturn EventPerk.#_trigger(unit, eventName, options, element);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get the event handler from the handler info object.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\t\tUnit.\n\t * @param\t{Object/Function/String}\thandlerInfo\tHandler info.\n\t */\n\tstatic #__getEventHandler(unit, handlerInfo)\n\t{\n\n\t\tlet handler = ( typeof handlerInfo === \"object\" ? handlerInfo[\"handler\"] : handlerInfo );\n\n\t\treturn handler;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if the target element is unit itself.\n\t *\n\t * @param\t{String}\t\telementName\t\t\tElement name.\n\t * @param\t{Object}\t\telementInfo\t\t\tElement info.\n\t *\n\t * @return \t{Boolean}\t\tTarget node list.\n\t */\n\t\tstatic #__isTargetSelf(elementName, eventInfo)\n\t{\n\n\t\tlet ret = false;\n\n\t\tif (elementName === \"this\" || eventInfo && eventInfo[\"selector\"] === \"this\")\n\t\t{\n\t\t\tret = true;\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get target elements for the eventInfo.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t * @param\t{HTMLElement}\trootNode\t\t\tRoot node to search elements.\n\t * @param\t{String}\t\telementName\t\t\tElement name.\n\t * @param\t{Object}\t\telementInfo\t\t\tElement info.\n\t *\n\t * @return \t{Array}\t\t\tTarget node list.\n\t */\n\tstatic #__getTargetElements(unit, rootNode, elementName, eventInfo)\n\t{\n\n\t\trootNode = rootNode || unit;\n\t\tlet elements;\n\n\t\tif (EventPerk.#__isTargetSelf(elementName, eventInfo))\n\t\t{\n\t\t\t// Target is \"this\"\n\t\t\telements = [rootNode];\n\t\t}\n\t\telse if (eventInfo && eventInfo[\"selector\"])\n\t\t{\n\t\t\t// If eventInfo[\"selector\"] is specified, target is eventInfo[\"selector\"]\n\t\t\telements = Util.scopedSelectorAll(rootNode, eventInfo[\"selector\"]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Target is #elementName\n\t\t\telements = Util.scopedSelectorAll(rootNode, `#${elementName}`);\n\t\t}\n\n\t\treturn elements;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if the given handler is already installed.\n\t *\n\t * @param\t{HTMLElement}\telement\t\t\t\tHTMLElement to check.\n\t * @param\t{String}\t\teventName\t\t\tEvent name.\n\t * @param\t{Function}\t\thandler\t\t\t\tEvent handler.\n\t *\n\t * @return \t{Boolean}\t\tTrue if already installed.\n\t */\n\tstatic #__isHandlerInstalled(element, eventName, handler)\n\t{\n\n\t\tlet isInstalled = false;\n\t\tlet listeners = Util.safeGet(EventPerk.#__eventInfo.get(element), `listeners.${eventName}`);\n\n\t\tif (listeners)\n\t\t{\n\t\t\tfor (let i = 0; i < listeners.length; i++)\n\t\t\t{\n\t\t\t\tif (listeners[i][\"handler\"] === handler)\n\t\t\t\t{\n\t\t\t\t\tisInstalled = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn isInstalled;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Call event handlers.\n\t *\n\t * This function is registered as event listener by element.addEventListener(),\n\t * so \"this\" is HTML element that triggered the event.\n\t *\n\t * @param\t{Object}\t\te\t\t\t\t\t\tEvent parameter.\n\t */\n\tstatic #__callEventHandler(e)\n\t{\n\n\t\tlet eventInfo = EventPerk.#__eventInfo.get(this);\n\t\tlet listeners = Util.safeGet(eventInfo, `listeners.${e.type}`);\n\t\tlet sender = Util.safeGet(e, \"detail.sender\", this);\n\t\tlet unit = Util.safeGet(eventInfo, \"unit\");\n\t\tlet templateStatuses = `statuses.${e.type}`;\n\t\tlet templatePromises = `promises.${e.type}`;\n\n\t\t// Check if handler is already running\n\t\t//Util.warn(Util.safeGet(this, templateStatuses) !== \"handling\", `EventPerk.#__callEventHandler(): Event handler is already running. name=${this.tagName}, eventName=${e.type}`);\n\n\t\tUtil.safeSet(eventInfo, templateStatuses, \"handling\");\n\n\t\tif (Util.safeGet(e, \"detail.async\", false) === false)\n\t\t{\n\t\t\t// Async\n\t\t\teventInfo[\"promises\"][e.type] = EventPerk.#__handle(e, sender, unit, listeners).then(() => {\n\t\t\t\tUtil.safeSet(eventInfo, templatePromises, null);\n\t\t\t\tUtil.safeSet(eventInfo, templateStatuses, \"\");\n\t\t\t}).catch((err) => {\n\t\t\t\tUtil.safeSet(eventInfo, templatePromises, null);\n\t\t\t\tUtil.safeSet(eventInfo, templateStatuses, \"\");\n\t\t\t\tthrow(err);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Sync\n\t\t\ttry\n\t\t\t{\n\t\t\t\teventInfo[\"promises\"][e.type] = EventPerk.#__handleSync(e, sender, unit, listeners);\n\t\t\t\tUtil.safeSet(eventInfo, templatePromises, null);\n\t\t\t\tUtil.safeSet(eventInfo, templateStatuses, \"\");\n\t\t\t}\n\t\t\tcatch (err)\n\t\t\t{\n\t\t\t\tUtil.safeSet(eventInfo, templatePromises, null);\n\t\t\t\tUtil.safeSet(eventInfo, templateStatuses, \"\");\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Call event handlers.\n\t *\n\t * @param\t{Object}\t\te\t\t\t\t\t\tEvent parameter.\n\t * @param\t{Object}\t\tsender\t\t\t\t\tSender object.\n\t * @param\t{Object}\t\tunit\t\t\t\t\tTarget unit.\n\t * @param\t{Object}\t\tlistener\t\t\t\tListers info.\n\t */\n\tstatic #__handle(e, sender, unit, listeners)\n\t{\n\n\t\tlet chain = Promise.resolve();\n\t\tlet stopPropagation = false;\n\n\t\tfor (let i = 0; i < listeners.length; i++)\n\t\t{\n\t\t\t// Options set in addEventHandler()\n\t\t\tlet ex = {\n\t\t\t\t\"unit\": unit,\n\t\t\t\t\"options\": ( listeners[i][\"options\"] ? listeners[i][\"options\"] : {} )\n\t\t\t}\n\n\t\t\tchain = chain.then(() => {\n\t\t\t\t// Get the handler\n\t\t\t\tlet handler = listeners[i][\"handler\"];\n\t\t\t\thandler = ( typeof handler === \"string\" ? unit[handler] : handler );\n\t\t\t\tUtil.assert(typeof handler === \"function\", () => `EventPerk.#__handle(): Event handler is not a function. name=${unit.tagName}, eventName=${e.type}`, TypeError);\n\n\t\t\t\t// Execute the handler\n\t\t\t\tlet bindTo = ( listeners[i][\"bindTo\"] ? listeners[i][\"bindTo\"] : unit );\n\t\t\t\treturn handler.call(bindTo, sender, e, ex);\n\t\t\t});\n\n\t\t\tstopPropagation = (listeners[i][\"options\"] && listeners[i][\"options\"][\"stopPropagation\"] ? true : stopPropagation)\n\t\t}\n\n\t\tif (stopPropagation)\n\t\t{\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\treturn chain;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Call event handlers Synchronously.\n\t *\n\t * @param\t{Object}\t\te\t\t\t\t\t\tEvent parameter.\n\t * @param\t{Object}\t\tsender\t\t\t\t\tSender object.\n\t * @param\t{Object}\t\tunit\t\t\t\t\tTarget unit.\n\t * @param\t{Object}\t\tlistener\t\t\t\tListers info.\n\t */\n\tstatic #__handleSync(e, sender, unit, listeners)\n\t{\n\n\t\tlet stopPropagation = false;\n\n\t\tfor (let i = 0; i < listeners.length; i++)\n\t\t{\n\t\t\t// Options set on addEventHandler()\n\t\t\tlet ex = {\n\t\t\t\t\"unit\": unit,\n\t\t\t\t\"options\": ( listeners[i][\"options\"] ? listeners[i][\"options\"] : {} )\n\t\t\t}\n\n\t\t\t// Get the handler\n\t\t\tlet handler = listeners[i][\"handler\"];\n\t\t\thandler = ( typeof handler === \"string\" ? unit[handler] : handler );\n\t\t\tUtil.assert(typeof handler === \"function\", () => `EventPerk.#__handleSync(): Event handler is not a function. name=${unit.tagName}, eventName=${e.type}`, TypeError);\n\n\t\t\t// Execute handler\n\t\t\tlet bindTo = ( listeners[i][\"bindTo\"] ? listeners[i][\"bindTo\"] : unit );\n\t\t\thandler.call(bindTo, sender, e, ex);\n\n\t\t\tstopPropagation = (listeners[i][\"options\"] && listeners[i][\"options\"][\"stopPropagation\"] ? true : stopPropagation)\n\t\t}\n\n\t\tif (stopPropagation)\n\t\t{\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/main/LICENSE\n */\n// =============================================================================\n\nimport AjaxUtil from \"../util/ajax-util.js\";\nimport ClassUtil from \"../util/class-util.js\";\nimport Perk from \"./perk.js\";\nimport StatusPerk from \"./status-perk.js\";\nimport Store from \"../store/store.js\";\nimport Unit from \"../unit/unit.js\";\nimport URLUtil from \"../util/url-util.js\";\nimport Util from \"../util/util.js\";\n\n// =============================================================================\n//\tUnit Perk Class\n// =============================================================================\n\nexport default class UnitPerk extends Perk\n{\n\n\t// -------------------------------------------------------------------------\n\t//  Private Variables\n\t// -------------------------------------------------------------------------\n\n\tstatic #__classInfo = {\"Unit\": {\"status\":\"loaded\"}};\n\tstatic #__info = {\n\t\t\"sectionName\":\t\t\"unit\",\n\t\t\"order\":\t\t\t400,\n\t};\n\n\t// -------------------------------------------------------------------------\n\t//  Properties\n\t// -------------------------------------------------------------------------\n\n\tstatic get info()\n\t{\n\n\t\treturn UnitPerk.#__info;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Methods\n\t// -------------------------------------------------------------------------\n\n\tstatic async globalInit()\n\t{\n\n\t\t// Upgrade Unit\n\t\tUnit.upgrade(\"spell\", \"unit.materializeAll\", UnitPerk.#_loadTags);\n\t\tUnit.upgrade(\"spell\", \"unit.materialize\", UnitPerk.#_loadUnit);\n\t\tUnit.upgrade(\"spell\", \"unit.summon\", UnitPerk.#_loadClass);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\tstatic init(unit, options)\n\t{\n\n\t\t// Upgrade unit\n\t\tunit.upgrade(\"inventory\", \"unit.units\", {});\n\n\t\t// Add event handlers\n\t\tunit.use(\"event.add\", \"doApplySettings\", {\"handler\":UnitPerk.#UnitPerk_onDoApplySettings, \"order\":UnitPerk.info[\"order\"]});\n\n\t\tlet settings = UnitPerk.#__loadAttrSettings(unit);\n\t\tunit.use(\"setting.merge\", settings);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Event Handlers (Unit)\n\t// -------------------------------------------------------------------------\n\n\tstatic #UnitPerk_onDoApplySettings(sender, e, ex)\n\t{\n\n\t\tlet chain = Promise.resolve();\n\n\t\tObject.entries(Util.safeGet(e.detail, \"settings.unit.units\", {})).forEach(([sectionName, sectionValue]) => {\n\t\t\tchain = chain.then(() => {\n\t\t\t\tif (!this.get(\"inventory\", `unit.units.${sectionName}.object`))\n\t\t\t\t{\n\t\t\t\t\tlet parentUnit = Util.safeGet(sectionValue, \"unit.options.parentUnit\");\n\t\t\t\t\tlet targetUnit = ( parentUnit ? this.use(\"basic.locate\", parentUnit) : this );\n\t\t\t\t\treturn targetUnit.cast(\"unit.materialize\", sectionName, sectionValue);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn chain;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Spells (Unit)\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load the class.\n\t *\n\t * @param\t{String}\t\ttagName\t\t\t\tTag name.\n\t * @param\t{Object}\t\tsettings\t\t\tUnit settings.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic #_loadClass(tagName, settings)\n\t{\n\n\t\tconsole.debug(`UnitPerk.#_loadClass(): Loading class. tagName=${tagName}`);\n\n\t\ttagName = tagName.toLowerCase();\n\t\tlet className = Util.safeGet(settings, \"unit.options.className\", Util.getClassNameFromTagName(tagName));\n\t\tlet baseClassName = Util.safeGet(settings, \"unit.options.autoMorph\", className );\n\t\tbaseClassName = ( baseClassName === true ? \"Unit\" : baseClassName );\n\n\t\t// Load the class if needed\n\t\tlet promise = Promise.resolve();\n\t\tif (UnitPerk.#__hasExternalClass(tagName, baseClassName, settings))\n\t\t{\n\t\t\tif (UnitPerk.#__classInfo[baseClassName] && UnitPerk.#__classInfo[baseClassName][\"status\"] === \"loading\")\n\t\t\t{\n\t\t\t\t// Already loading\n\t\t\t\tconsole.debug(`UnitPerk.#_loadClass(): Class Already loading. className=${className}, baseClassName=${baseClassName}`);\n\t\t\t\tpromise = UnitPerk.#__classInfo[baseClassName].promise;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Need loading\n\t\t\t\tconsole.debug(`ClassPerk.#_loadClass(): Loading class. className=${className}, baseClassName=${baseClassName}`);\n\t\t\t\tUnitPerk.#__classInfo[baseClassName] = {\"status\":\"loading\"};\n\n\t\t\t\tlet options = {};\n\t\t\t\toptions[\"type\"] = Unit.get(\"setting\", \"system.unit.options.type\", \"text/javascript\");\n\t\t\t\tpromise = AjaxUtil.loadClass(UnitPerk.#__getClassURL(tagName, settings), options).then(() => {\n\t\t\t\t\tUnitPerk.#__classInfo[baseClassName] = {\"status\":\"loaded\"};\n\t\t\t\t});\n\t\t\t\tUnitPerk.#__classInfo[baseClassName].promise = promise;\n\t\t\t}\n\t\t}\n\n\t\treturn promise.then(() => {\n\t\t\tif (baseClassName !== className)\n\t\t\t{\n\t\t\t\t// Morph\n\t\t\t\tlet superClass = ClassUtil.getClass(baseClassName);\n\t\t\t\tlet classDef = ClassUtil.newUnit(className, settings, superClass, tagName);\n\t\t\t\tUnitPerk.#__classInfo[className] = {\"status\":\"loaded\"};\n\t\t\t}\n\n\t\t\t// Define the tag\n\t\t\tif (!customElements.get(tagName))\n\t\t\t{\n\t\t\t\tlet classDef = ClassUtil.getClass(className);\n\t\t\t\tUtil.assert(classDef, () => `UnitPerk.#_loadClass(): Class does not exist. tagName=${tagName}, className=${className}`);\n\n\t\t\t\tcustomElements.define(tagName, classDef);\n\t\t\t}\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load the unit and add to parent unit.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tParent unit.\n\t * @param\t{String}\t\ttagName\t\t\t\tUnit tag name.\n\t * @param\t{Object}\t\tsettings\t\t\tSettings for the unit.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad Options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic async #_loadUnit(unit, tagName, settings, options)\n\t{\n\n\t\tconsole.debug(`UnitPerk.#_loadUnit(): Adding the unit. name=${unit.tagName}, tagName=${tagName}`);\n\n\t\t// Already loaded\n\t\tif (unit.get(\"inventory\", `unit.units.${tagName}.object`))\n\t\t{\n\t\t\tconsole.debug(`UnitPerk.#_loadUnit(): Already loaded. name=${unit.tagName}, tagName=${tagName}`);\n\t\t\treturn Promise.resolve(unit.get(\"inventory\", `unit.units.${tagName}.object`));\n\t\t}\n\n\t\t// Get the tag name from settings if specified\n\t\tlet tag = Util.safeGet(settings, \"unit.options.tag\");\n\t\tif (tag)\n\t\t{\n\t\t\ttagName = tag.match(/([\\w-]+)\\s+\\w+.*?>/)[1];\n\t\t}\n\n\t\t// Load class\n\t\tawait UnitPerk.#_loadClass(tagName, settings);\n\n\t\t// Insert tag\n\t\tlet addedUnit = await UnitPerk.#__insertTag(unit, tagName, settings);\n\t\tunit.set(\"inventory\", `unit.units.${tagName}.object`, addedUnit);\n\n\t\t// Wait for the added unit to be ready\n\t\tlet sync = Util.safeGet(options, \"syncOnAdd\", Util.safeGet(settings, \"unit.options.syncOnAdd\"));\n\t\tif (sync)\n\t\t{\n\t\t\tawait unit.cast(\"status.wait\", [{\n\t\t\t\t\"uniqueId\":\taddedUnit.uniqueId,\n\t\t\t\t\"status\":\t(sync === true ? \"ready\" : sync)\n\t\t\t}]);\n\t\t}\n\n\t\treturn addedUnit;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Load scripts for tags that has bm-autoload/bm-automorph attribute.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit. Nullable.\n\t * @param\t{HTMLElement}\trootNode\t\t\tTarget node.\n\t * @param\t{Object}\t\toptions\t\t\t\tLoad Options.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic #_loadTags(unit, rootNode, options)\n\t{\n\n\t\tconsole.debug(`UnitPerk.#_loadTags(): Loading tags. rootNode=${rootNode.tagName}`);\n\n\t\tlet promises = [];\n\n\t\t// Load tags that has bm-autoload/bm-classref/bm-automorph attribute\n\t\tlet targets = Util.scopedSelectorAll(rootNode, \"[bm-autoload]:not([bm-autoloading]):not([bm-powered]),[bm-automorph]:not([bm-autoloading]):not([bm-powered]),[bm-classref]:not([bm-autoloading]):not([bm-powered]),[bm-htmlref]:not([bm-autoloading]):not([bm-powered])\");\n\t\ttargets.forEach((element) => {\n\t\t\t// Get settings from attributes\n\t\t\tlet settings = UnitPerk.#__loadAttrSettings(element);\n\n\t\t\telement.setAttribute(\"bm-autoloading\", \"\");\n\t\t\telement._injectSettings = function(curSettings){\n\t\t\t\treturn Util.deepMerge(curSettings, settings);\n\t\t\t};\n\n\t\t\t// Load the class\n\t\t\tpromises.push(UnitPerk.#_loadClass(element.tagName, settings).then(() => {\n\t\t\t\telement.removeAttribute(\"bm-autoloading\");\n\t\t\t}));\n\t\t});\n\n\t\treturn Promise.all(promises).then(() => {\n\t\t\tlet waitFor = Util.safeGet(options, \"waitForTags\");\n\t\t\tif (waitFor)\n\t\t\t{\n\t\t\t\treturn UnitPerk.#__waitForChildren(rootNode);\n\t\t\t}\n\t\t});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\t//  Privates\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Get settings from unit's attribute.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t */\n\tstatic #__loadAttrSettings(unit)\n\t{\n\n\t\tlet settings = {\n\t\t\t\"unit\": {\n\t\t\t\t\"options\": {}\n\t\t\t}\n\t\t};\n\n\t\t// Class name\n\t\tif (unit.hasAttribute(\"bm-classname\"))\n\t\t{\n\t\t\tsettings[\"unit\"][\"options\"][\"className\"] = unit.getAttribute(\"bm-classname\");\n\t\t}\n\n\t\t// Split  class\n\t\tif (unit.hasAttribute(\"bm-splitclass\"))\n\t\t{\n\t\t\tlet splitClass = unit.getAttribute(\"bm-splitclass\") || true;\n\t\t\tif (splitClass === \"false\")\n\t\t\t{\n\t\t\t\tsplitClass = false;\n\t\t\t}\n\t\t\tsettings[\"unit\"][\"options\"][\"splitClass\"] = splitClass;\n\t\t}\n\n\t\t// Path\n\t\tif (unit.hasAttribute(\"bm-path\"))\n\t\t{\n\t\t\tsettings[\"unit\"][\"options\"][\"path\"] = unit.getAttribute(\"bm-path\");\n\t\t}\n\n\t\t// File name\n\t\tif (unit.hasAttribute(\"bm-filename\"))\n\t\t{\n\t\t\tsettings[\"unit\"][\"options\"][\"fileName\"] = unit.getAttribute(\"bm-filename\");\n\t\t}\n\n\t\t// Morphing\n\t\tif (unit.hasAttribute(\"bm-automorph\"))\n\t\t{\n\t\t\tsettings[\"unit\"][\"options\"][\"autoMorph\"] = ( unit.getAttribute(\"bm-automorph\") ? unit.getAttribute(\"bm-automorph\") : true );\n\t\t}\n\t\tif (unit.hasAttribute(\"bm-htmlref\"))\n\t\t{\n\t\t\tsettings[\"unit\"][\"options\"][\"autoMorph\"] = ( unit.getAttribute(\"bm-htmlref\") ? unit.getAttribute(\"bm-htmlref\") : true );\n\t\t}\n\n\t\t// Auto loading\n\t\tif (unit.hasAttribute(\"bm-autoload\"))\n\t\t{\n\t\t\tsettings[\"unit\"][\"options\"][\"autoLoad\"] = ( unit.getAttribute(\"bm-autoload\") ? unit.getAttribute(\"bm-autoload\") : true );\n\t\t}\n\t\tif (unit.hasAttribute(\"bm-classref\"))\n\t\t{\n\t\t\tsettings[\"unit\"][\"options\"][\"autoLoad\"] = ( unit.getAttribute(\"bm-classref\") ? unit.getAttribute(\"bm-classref\") : true );\n\t\t}\n\n\t\t//return settings;\n\t\treturn UnitPerk.#__adjustSettings(unit, settings);\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Adjust unit settings.\n\t *\n\t * @param\t{Unit}\t\t\tunit\t\t\t\tUnit.\n\t */\n\tstatic #__adjustSettings(unit, settings)\n\t{\n\n\t\tlet autoLoad = Util.safeGet(settings, \"unit.options.autoLoad\");\n\t\tif (typeof(autoLoad) === \"string\")\n\t\t{\n\t\t\tlet url = URLUtil.parseURL(autoLoad);\n\t\t\tsettings[\"unit\"][\"options\"][\"path\"] = url.path;\n\t\t\tsettings[\"unit\"][\"options\"][\"fileName\"] = url.filenameWithoutExtension;\n\n\t\t\tif (url.extension === \"html\")\n\t\t\t{\n\t\t\t\tsettings[\"unit\"][\"options\"][\"autoMorph\"] = Util.safeGet(settings, \"unit.options.autoMorph\", true);\n\t\t\t}\n\t\t}\n\n\n\t\treturn settings;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Check if the unit has the external class file.\n\t *\n\t * @param\t{String}\t\ttagName\t\t\t\tTag name.\n\t * @param\t{String}\t\tclassName\t\t\tClass name.\n\t * @param\t{Object}\t\tsettings\t\t\tUnit settings.\n\t *\n\t * @return  {Boolean}\t\tTrue if the unit has the external class file.\n\t */\n\tstatic #__hasExternalClass(tagName, className, settings)\n\t{\n\n\t\tlet ret = false;\n\n\t\tif ((Util.safeGet(settings, \"unit.options.classRef\"))\n\t\t\t\t|| (Util.safeGet(settings, \"unit.options.htmlRef\"))\n\t\t\t\t|| (Util.safeGet(settings, \"unit.options.autoLoad\"))\n\t\t\t\t|| (Util.safeGet(settings, \"unit.options.autoMorph\")))\n\t\t{\n\t\t\tret = true;\n\n\t\t\tif (UnitPerk.#__classInfo[className] && UnitPerk.#__classInfo[className][\"status\"] === \"loaded\")\n\t\t\t{\n\t\t\t\tret = false;\n\t\t\t}\n\t\t\telse if (customElements.get(tagName))\n\t\t\t{\n\t\t\t\tret = false;\n\t\t\t}\n\t\t\telse if (ClassUtil.getClass(className))\n\t\t\t{\n\t\t\t\tret = false;\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Insert the tag and return the inserted unit.\n\t *\n\t * @param\t{String}\t\ttagName\t\t\t\tTagname.\n\t * @param\t{Object}\t\tsettings\t\t\tUnit settings.\n\t *\n\t * @return  {Unit}\t\tUnit.\n\t */\n\tstatic #__insertTag(unit, tagName, settings)\n\t{\n\n\t\tlet addedUnit;\n\t\tlet root;\n\n\t\t// Check root node\n\t\tif (Util.safeGet(settings, \"unit.options.parentNode\"))\n\t\t{\n\t\t\troot = unit.use(\"basic.scan\", Util.safeGet(settings, \"unit.options.parentNode\"));\n\t\t}\n\t\telse\n\t\t{\n\t\t\troot = this.get(\"inventory\", \"basic.unitRoot\");\n\t\t}\n\n\t\tUtil.assert(root, () => `UnitPerk.#__insertTag(): Root node does not exist. name=${unit.tagName}, tagName=${tagName}, parentNode=${Util.safeGet(settings, \"unit.options.parentNode\")}`, ReferenceError);\n\n\t\t// Build tag\n\t\tlet tag = ( Util.safeGet(settings, \"unit.options.tag\") ? Util.safeGet(settings, \"unit.options.tag\") : `<${tagName}></${tagName}>` );\n\n\t\t// Insert tag\n\t\tif (Util.safeGet(settings, \"unit.options.replaceParent\"))\n\t\t{\n\t\t\troot.outerHTML = tag;\n\t\t\taddedUnit = root;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet position = Util.safeGet(settings, \"unit.options.adjacentPosition\", \"afterbegin\");\n\t\t\troot.insertAdjacentHTML(position, tag);\n\n\t\t\t// Get new instance\n\t\t\tswitch (position)\n\t\t\t{\n\t\t\tcase \"beforebegin\":\n\t\t\t\taddedUnit = root.previousSibling;\n\t\t\t\tbreak;\n\t\t\tcase \"afterbegin\":\n\t\t\t\taddedUnit = root.children[0];\n\t\t\t\tbreak;\n\t\t\tcase \"beforeend\":\n\t\t\t\taddedUnit = root.lastChild;\n\t\t\t\tbreak;\n\t\t\tcase \"afterend\":\n\t\t\t\taddedUnit = root.nextSibling;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Inject settings to added unit\n\t\taddedUnit._injectSettings = function(curSettings){\n\t\t\treturn Util.deepMerge(curSettings, settings);\n\t\t};\n\n\t\treturn addedUnit;\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Wait for units under the specified root node to be ready.\n\t *\n\t * @param\t{HTMLElement}\trootNode\t\t\tTarget node.\n\t *\n\t * @return  {Promise}\t\tPromise.\n\t */\n\tstatic #__waitForChildren(rootNode)\n\t{\n\n\t\tlet waitList = [];\n\t\tlet targets = Util.scopedSelectorAll(rootNode, \"[bm-powered],[bm-autoloading]\");\n\t\ttargets.forEach((element) => {\n\t\t\tif (rootNode != element.rootElement && !element.hasAttribute(\"bm-nowait\"))\n\t\t\t{\n\t\t\t\tlet waitItem = {\"object\":element, \"status\":\"ready\"};\n\t\t\t\twaitList.push(waitItem);\n\t\t\t}\n\t\t});\n\n\t\treturn StatusPerk.waitFor(waitList, {\"waiter\":rootNode});\n\n\t}\n\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * Return URL to Class file.\n\t *\n\t * @param\t{String}\t\ttagName\t\t\t\tTag name.\n\t * @param\t{Object}\t\tsettings\t\t\tUnit settings.\n\t *\n\t * @return  {String}\t\tURL.\n\t */\n\tstatic #__getClassURL(tagName, settings)\n\t{\n\n\t\tlet path = Util.concatPath([\n\t\t\tUtil.safeGet(settings, \"system.unit.options.path\", Unit.get(\"setting\", \"system.unit.options.path\", \"\")),\n\t\t\tUtil.safeGet(settings, \"unit.options.path\", \"\"),\n\t\t]);\n\t\tlet fileName = Util.safeGet(settings, \"unit.options.fileName\", tagName);\n\t\tlet query = Util.safeGet(settings, \"unit.options.query\");\n\n\t\treturn Util.concatPath([path, fileName]) + (query ? `?${query}` : \"\");\n\n\t}\n\n}\n","// =============================================================================\n/**\n * BitsmistJS - Javascript Web Client Framework\n *\n * @copyright\t\tMasaki Yasutake\n * @link\t\t\thttps://bitsmist.com/\n * @license\t\t\thttps://github.com/bitsmist/bitsmist/blob/master/LICENSE\n */\n// =============================================================================\n\n// Util\nimport Util from \"./util/util.js\";\nimport ClassUtil from \"./util/class-util.js\";\nimport AjaxUtil from \"./util/ajax-util.js\";\nimport URLUtil from \"./util/url-util.js\";\n\n// Store\nimport Store from \"./store/store.js\";\nimport ChainableStore from \"./store/chainable-store.js\";\n\n// Unit\nimport Unit from \"./unit/unit.js\";\n\n// Perk\nimport Perk from \"./perk/perk.js\";\nimport BasicPerk from \"./perk/basic-perk.js\";\nimport SettingPerk from \"./perk/setting-perk.js\";\nimport StatusPerk from \"./perk/status-perk.js\";\nimport SkinPerk from \"./perk/skin-perk.js\";\nimport StylePerk from \"./perk/style-perk.js\";\nimport EventPerk from \"./perk/event-perk.js\";\nimport UnitPerk from \"./perk/unit-perk.js\";\n\n// Export to global BITSMIST.V1\nif (!globalThis.BITSMIST)\n{\n\tglobalThis.BITSMIST = {};\n\tglobalThis.BITSMIST.V1 = {};\n\tglobalThis.BITSMIST.V1.$CORE = {};\n\tglobalThis.BITSMIST.V1.$CORE.Util = Util;\n\tglobalThis.BITSMIST.V1.$CORE.ClassUtil = ClassUtil;\n\tglobalThis.BITSMIST.V1.$CORE.AjaxUtil = AjaxUtil;\n\tglobalThis.BITSMIST.V1.$CORE.URLUtil = URLUtil;\n\tglobalThis.BITSMIST.V1.$CORE.Store = Store;\n\tglobalThis.BITSMIST.V1.$CORE.ChainableStore = ChainableStore;\n\tglobalThis.BITSMIST.V1.$CORE.Perk = Perk;\n\tglobalThis.BITSMIST.V1.$CORE.Unit = Unit;\n}\n\n// Shortcut\nglobalThis.BITSMIST.V1.Unit = Unit;\n\n// Register Perks (Order matters)\nPerk.registerPerk(BasicPerk);\nPerk.registerPerk(Perk);\nPerk.registerPerk(SettingPerk);\nPerk.registerPerk(StatusPerk);\nPerk.registerPerk(SkinPerk);\nPerk.registerPerk(StylePerk);\nPerk.registerPerk(EventPerk);\nPerk.registerPerk(UnitPerk);\n\n// Load Tags\nBasicPerk.ready.then(async () => {\n\tif (Unit.get(\"setting\", \"system.unit.options.autoLoadOnStartup\", true))\n\t{\n\t\tUnit.cast(\"unit.materializeAll\", document.body, {\"waitForTags\":false});\n\t}\n});\n\n// Export\nexport {\n\tUtil,\n\tClassUtil,\n\tAjaxUtil,\n\tURLUtil,\n\tStore,\n\tChainableStore,\n\tPerk,\n\tUnit,\n};\n"],"names":["uuidv4"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}